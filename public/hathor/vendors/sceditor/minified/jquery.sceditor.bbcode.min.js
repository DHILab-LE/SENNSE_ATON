<<<<<<< HEAD
/* SCEditor v2.1.3 | (C) 2017, Sam Clarke | sceditor.com/license */

!function(o){"use strict";function e(e,t){return typeof t===e}o=o&&o.hasOwnProperty("default")?o.default:o;var be=e.bind(null,"string"),xe=e.bind(null,"undefined"),we=e.bind(null,"function"),r=e.bind(null,"number");function t(e){return!Object.keys(e).length}function ke(e,t){for(var n=e===!!e,o=n?2:1,r=n?t:e,i=!!n&&e;o<arguments.length;o++){var l=arguments[o];for(var a in l){var s=l[a];if(!xe(s)){var c=null!==s&&"object"==typeof s&&Object.getPrototypeOf(s)===Object.prototype,u=Array.isArray(s);r[a]=i&&(c||u)?ke(!0,r[a]||(u?[]:{}),s):s}}}return r}function Ce(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Ee(t,n){if(Array.isArray(t)||"length"in t&&r(t.length))for(var e=0;e<t.length;e++)n(e,t[e]);else Object.keys(t).forEach(function(e){n(e,t[e])})}var i={},Se=1,Te=3;function l(e){return e=parseFloat(e),isFinite(e)?e:0}function De(e,t,n){var o=(n||document).createElement(e);return Ee(t||{},function(e,t){"style"===e?o.style.cssText=t:e in o?o[e]=t:o.setAttribute(e,t)}),o}function Me(e,t){for(var n=e||{};(n=n.parentNode)&&!/(9|11)/.test(n.nodeType);)if(!t||qe(n,t))return n}function Ne(e,t){return qe(e,t)?e:Me(e,t)}function Be(e){e.parentNode&&e.parentNode.removeChild(e)}function Re(e,t){e.appendChild(t)}function He(e,t){return e.querySelectorAll(t)}var Ie=!0;function Fe(n,e,o,r,i){e.split(" ").forEach(function(e){var t;be(o)?(t=r["_sce-event-"+e+o]||function(e){for(var t=e.target;t&&t!==n;){if(qe(t,o))return void r.call(t,e);t=t.parentNode}},r["_sce-event-"+e+o]=t):(t=o,i=r),n.addEventListener(e,t,i||!1)})}function ze(n,e,o,r,i){e.split(" ").forEach(function(e){var t;be(o)?t=r["_sce-event-"+e+o]:(t=o,i=r),n.removeEventListener(e,t,i||!1)})}function Ae(e,t,n){if(arguments.length<3)return e.getAttribute(t);null==n?a(e,t):e.setAttribute(t,n)}function a(e,t){e.removeAttribute(t)}function Oe(e){je(e,"display","none")}function _e(e){je(e,"display","")}function Le(e){Ge(e)?Oe(e):_e(e)}function je(n,e,t){if(arguments.length<3){if(be(e))return 1===n.nodeType?getComputedStyle(n)[e]:null;Ee(e,function(e,t){je(n,e,t)})}else{var o=(t||0===t)&&!isNaN(t);n.style[e]=o?t+"px":t}}function Pe(e,t,n){var o=arguments.length,r={};if(e.nodeType===Se){if(1===o)return Ee(e.attributes,function(e,t){/^data\-/i.test(t.name)&&(r[t.name.substr(5)]=t.value)}),r;if(2===o)return Ae(e,"data-"+t);Ae(e,"data-"+t,String(n))}}function qe(e,t){var n=!1;return e&&e.nodeType===Se&&(n=(e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,t)),n}function Ve(e,t){return t.parentNode.insertBefore(e,t)}function s(e){return e.className.trim().split(/\s+/)}function We(e,t){return qe(e,"."+t)}function $e(e,t){var n=s(e);n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function Ue(e,t){var n=s(e);Ce(n,t),e.className=n.join(" ")}function Ye(e,t,n){(n=xe(n)?!We(e,t):n)?$e(e,t):Ue(e,t)}function Ke(e,t){if(xe(t)){var n=getComputedStyle(e),o=l(n.paddingLeft)+l(n.paddingRight),r=l(n.borderLeftWidth)+l(n.borderRightWidth);return e.offsetWidth-o-r}je(e,"width",t)}function Xe(e,t){if(xe(t)){var n=getComputedStyle(e),o=l(n.paddingTop)+l(n.paddingBottom),r=l(n.borderTopWidth)+l(n.borderBottomWidth);return e.offsetHeight-o-r}je(e,"height",t)}function Qe(e,t,n){var o;we(window.CustomEvent)?o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(o=e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function Ge(e){return!!e.getClientRects().length}function Je(e,t,n,o,r){for(e=r?e.lastChild:e.firstChild;e;){var i=r?e.previousSibling:e.nextSibling;if(!n&&!1===t(e)||!o&&!1===Je(e,t,n,o,r)||n&&!1===t(e))return!1;e=i}}function Ze(e,t,n,o){Je(e,t,n,o,!0)}function et(e,t){var n=(t=t||document).createDocumentFragment(),o=De("div",{},t);for(o.innerHTML=e;o.firstChild;)Re(n,o.firstChild);return n}function tt(e){return e&&(!qe(e,"p,div")||e.className||Ae(e,"style")||!t(Pe(e)))}function nt(e,t){var n=De(t,{},e.ownerDocument);for(Ee(e.attributes,function(e,t){try{Ae(n,t.name,t.value)}catch(e){}});e.firstChild;)Re(n,e.firstChild);return e.parentNode.replaceChild(n,e),n}var c="|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|";function ot(e){return!!/11?|9/.test(e.nodeType)&&"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf("|"+e.nodeName.toLowerCase()+"|")<0}function rt(e,t){var n,o=(e||{}).nodeType||Te;return o!==Se?o===Te:"code"===(n=e.tagName.toLowerCase())?!t:c.indexOf("|"+n+"|")<0}function u(e,t){t.style.cssText=e.style.cssText+t.style.cssText}function it(e){Je(e,function(e){var t,n=!rt(e,!0);if(n&&rt(e.parentNode,!0)){var o=function(e){for(;rt(e.parentNode,!0);)e=e.parentNode;return e}(e),r=f(o,e),i=e;u(o,i),Ve(r,o),Ve(i,o)}if(n&&qe(e,"ul,ol")&&qe(e.parentNode,"ul,ol")){var l=("li",(t=e.previousElementSibling)?qe(t,"li")?t:null:t);l||Ve(l=De("li"),e),Re(l,e)}})}function d(e,t){return e?(t?e.previousSibling:e.nextSibling)||d(e.parentNode,t):null}function lt(e){var t,n,o,r,i,l,a,s=je(e,"whiteSpace"),c=/line$/i.test(s),u=e.firstChild;if(!/pre(\-wrap)?$/i.test(s))for(;u;){if(l=u.nextSibling,t=u.nodeValue,(n=u.nodeType)===Se&&u.firstChild&&lt(u),n===Te){for(o=d(u),r=d(u,!0),a=!1;We(r,"sceditor-ignore");)r=d(r,!0);if(rt(u)&&r){for(i=r;i.lastChild;)for(i=i.lastChild;We(i,"sceditor-ignore");)i=d(i,!0);a=i.nodeType===Te?/[\t\n\r ]$/.test(i.nodeValue):!rt(i)}t=t.replace(/\u200B/g,""),r&&rt(r)&&!a||(t=t.replace(c?/^[\t ]+/:/^[\t\n\r ]+/,"")),o&&rt(o)||(t=t.replace(c?/[\t ]+$/:/[\t\n\r ]+$/,"")),t.length?u.nodeValue=t.replace(c?/[\t ]+/g:/[\t\n\r ]+/g," "):Be(u)}u=l}}function f(e,t){var n=e.ownerDocument.createRange();return n.setStartBefore(e),n.setEndAfter(t),n.extractContents()}function at(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function p(e,t){var n,o,r=e.style;if(i[t]||(i[t]=t.replace(/^-ms-/,"ms-").replace(/-(\w)/g,function(e,t){return t.toUpperCase()})),o=r[t=i[t]],"textAlign"===t){if(n=r.direction,o=o||je(e,t),je(e.parentNode,t)===o||"block"!==je(e,"display")||qe(e,"hr,th"))return"";if(/right/i.test(o)&&"rtl"===n||/left/i.test(o)&&"ltr"===n)return""}return o}var n,h,m,st={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:"#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",locale:Ae(document.documentElement,"lang")||"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,startInSourceMode:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,parserOptions:{},dropDownCss:{}},g=navigator.userAgent,v=function(){for(var e=3,t=document,n=t.createElement("div"),o=n.getElementsByTagName("i");n.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",o[0];);return t.documentMode&&t.all&&window.atob&&(e=10),4===e&&t.documentMode&&(e=11),4<e?e:void 0}(),ct="-ms-ime-align"in document.documentElement.style,ut=/iPhone|iPod|iPad| wosbrowser\//i.test(g),dt=((m=document.createElement("div")).contentEditable=!0,"contentEditable"in document.documentElement&&"true"===m.contentEditable&&(h=/Opera Mobi|Opera Mini/i.test(g),/Android/i.test(g)&&(h=!0,/Safari/.test(g)&&(h=!(n=/Safari\/(\d+)/.exec(g))||!n[1]||n[1]<534)),/ Silk\//i.test(g)&&(h=!(n=/AppleWebKit\/(\d+)/.exec(g))||!n[1]||n[1]<534),ut&&(h=/OS [0-4](_\d)+ like Mac/i.test(g)),/Firefox/i.test(g)&&(h=!1),/OneBrowser/i.test(g)&&(h=!1),"UCWEB"===navigator.vendor&&(h=!1),v<=9&&(h=!0),!h)),y=/^(https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i;function ft(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function pt(e,t){if(!e)return e;var n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":"&nbsp; ","\r\n":"<br />","\r":"<br />","\n":"<br />"};return!1!==t&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})}var b={html:'<!DOCTYPE html><html{attrs}><head><style>.ie * {min-height: auto !important} .ie table td {height:15px} @supports (-ms-ime-align:auto) { * { min-height: auto !important; } }</style><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="link">{url}</label> <input type="text" id="image" dir="ltr" placeholder="https://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" dir="ltr" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" dir="ltr" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" dir="ltr" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" frameborder="0" allowfullscreen src="https://www.youtube.com/embed/{id}?wmode=opaque&start={time}" data-youtube-id="{id}"></iframe>'};function ht(e,t,n){var o=b[e];return Object.keys(t).forEach(function(e){o=o.replace(new RegExp(ft("{"+e+"}"),"g"),t[e])}),n&&(o=et(o)),o}var x=v&&v<11;function w(e){if("mozHidden"in document)for(var t,n=e.getBody();n;){if((t=n).firstChild)t=t.firstChild;else{for(;t&&!t.nextSibling;)t=t.parentNode;t&&(t=t.nextSibling)}3===n.nodeType&&/[\n\r\t]+/.test(n.nodeValue)&&(/^pre/.test(je(n.parentNode,"whiteSpace"))||Be(n)),n=t}}var mt={bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{state:function(e){if(e&&3===e.nodeType&&(e=e.parentNode),e){var t="ltr"===je(e,"direction"),n=je(e,"textAlign");return"left"===n||n===(t?"start":"end")}},exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{state:function(e){if(e&&3===e.nodeType&&(e=e.parentNode),e){var t="ltr"===je(e,"direction"),n=je(e,"textAlign");return"right"===n||n===(t?"end":"start")}},exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(t,e,n){var o=De("div");Fe(o,"click","a",function(e){n(Pe(this,"font")),t.closeDropDown(!0),e.preventDefault()}),t.opts.fonts.split(",").forEach(function(e){Re(o,ht("fontOpt",{font:e},!0))}),t.createDropDown(e,"font-picker",o)},exec:function(e){var t=this;mt.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(t,e,n){var o=De("div");Fe(o,"click","a",function(e){n(Pe(this,"size")),t.closeDropDown(!0),e.preventDefault()});for(var r=1;r<=7;r++)Re(o,ht("sizeOpt",{size:r},!0));t.createDropDown(e,"fontsize-picker",o)},exec:function(e){var t=this;mt.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(t,e,n){var o=De("div"),r="",i=mt.color;i._htmlCache||(t.opts.colors.split("|").forEach(function(e){r+='<div class="sceditor-color-column">',e.split(",").forEach(function(e){r+='<a href="#" class="sceditor-color-option" style="background-color: '+e+'" data-color="'+e+'"></a>'}),r+="</div>"}),i._htmlCache=r),Re(o,et(i._htmlCache)),Fe(o,"click","a",function(e){n(Pe(this,"color")),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"color-picker",o)},exec:function(e){var t=this;mt.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=De("div"),o=this;Re(n,ht("pastetext",{label:o._("Paste your text inside the following box:"),insert:o._("Insert")},!0)),Fe(n,"click",".button",function(e){(t=He(n,"#txt")[0].value)&&o.wysiwygEditorInsertText(t),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:function(){w(this),this.execCommand("insertunorderedlist")},tooltip:"Bullet list"},orderedlist:{exec:function(){w(this),this.execCommand("insertorderedlist")},tooltip:"Numbered list"},indent:{state:function(e,t){var n,o,r;return qe(t,"li")?0:qe(t,"ul,ol,menu")&&(o=(n=this.getRangeHelper().selectedRange()).startContainer.parentNode,r=n.endContainer.parentNode,o!==o.parentNode.firstElementChild||qe(r,"li")&&r!==r.parentNode.lastElementChild)?0:-1},exec:function(){var e=this.getRangeHelper().getFirstBlockParent();this.focus(),Ne(e,"ul,ol,menu")&&this.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(e,t){return Ne(t,"ul,ol,menu")?0:-1},exec:function(){Ne(this.getRangeHelper().getFirstBlockParent(),"ul,ol,menu")&&this.execCommand("outdent")},tooltip:"Remove one indent"},table:{exec:function(e){var r=this,i=De("div");Re(i,ht("table",{rows:r._("Rows:"),cols:r._("Cols:"),insert:r._("Insert")},!0)),Fe(i,"click",".button",function(e){var t=Number(He(i,"#rows")[0].value),n=Number(He(i,"#cols")[0].value),o="<table>";0<t&&0<n&&(o+=Array(t+1).join("<tr>"+Array(n+1).join("<td>"+(x?"":"<br />")+"</td>")+"</tr>"),o+="</table>",r.wysiwygEditorInsertHtml(o),r.closeDropDown(!0),e.preventDefault())}),r.createDropDown(e,"inserttable",i)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>",(x?"":"<br />")+"</code>")},tooltip:"Code"},image:{_dropDown:function(t,e,n,o){var r=De("div");Re(r,ht("image",{url:t._("URL:"),width:t._("Width (optional):"),height:t._("Height (optional):"),insert:t._("Insert")},!0));var i=He(r,"#image")[0];i.value=n,Fe(r,"click",".button",function(e){i.value&&o(i.value,He(r,"#width")[0].value,He(r,"#height")[0].value),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertimage",r)},exec:function(e){var r=this;mt.image._dropDown(r,e,"",function(e,t,n){var o="";t&&(o+=' width="'+t+'"'),n&&(o+=' height="'+n+'"'),r.wysiwygEditorInsertHtml("<img"+o+' src="'+e+'" />')})},tooltip:"Insert an image"},email:{_dropDown:function(n,e,o){var r=De("div");Re(r,ht("email",{label:n._("E-mail:"),desc:n._("Description (optional):"),insert:n._("Insert")},!0)),Fe(r,"click",".button",function(e){var t=He(r,"#email")[0].value;t&&o(t,He(r,"#des")[0].value),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"insertemail",r)},exec:function(e){var n=this;mt.email._dropDown(n,e,function(e,t){n.focus(),!n.getRangeHelper().selectedHtml()||t?n.wysiwygEditorInsertHtml('<a href="mailto:'+e+'">'+(t||e)+"</a>"):n.execCommand("createlink","mailto:"+e)})},tooltip:"Insert an email"},link:{_dropDown:function(t,e,n){var o=De("div");Re(o,ht("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0));var r=He(o,"#link")[0];function i(e){r.value&&n(r.value,He(o,"#des")[0].value),t.closeDropDown(!0),e.preventDefault()}Fe(o,"click",".button",i),Fe(o,"keypress",function(e){13===e.which&&r.value&&i(e)},Ie),t.createDropDown(e,"insertlink",o)},exec:function(e){var n=this;mt.link._dropDown(n,e,function(e,t){n.focus(),t||!n.getRangeHelper().selectedHtml()?(t=t||e,n.wysiwygEditorInsertHtml('<a href="'+e+'">'+t+"</a>")):n.execCommand("createlink",e)})},tooltip:"Insert a link"},unlink:{state:function(){return Ne(this.currentNode(),"a")?0:-1},exec:function(){var e=Ne(this.currentNode(),"a");if(e){for(;e.firstChild;)Ve(e.firstChild,e);Be(e)}},tooltip:"Unlink"},quote:{exec:function(e,t,n){var o="<blockquote>",r="</blockquote>";t?(o=o+(n=n?"<cite>"+n+"</cite>":"")+t+r,r=null):""===this.getRangeHelper().selectedHtml()&&(r=(x?"":"<br />")+r),this.wysiwygEditorInsertHtml(o,r)},tooltip:"Insert a Quote"},emoticon:{exec:function(f){var p=this,h=function(e){var t,n,o=p.opts,r=o.emoticonsRoot||"",i=o.emoticonsCompat,l=p.getRangeHelper(),a=i&&" "!==l.getOuterText(!0,1)?" ":"",s=i&&" "!==l.getOuterText(!1,1)?" ":"",c=De("div"),u=De("div"),d=ke({},o.emoticons.dropdown,e?o.emoticons.more:{});return Re(c,u),n=Math.sqrt(Object.keys(d).length),Fe(c,"click","img",function(e){p.insert(a+Ae(this,"alt")+s,null,!1).closeDropDown(!0),e.preventDefault()}),Ee(d,function(e,t){Re(u,De("img",{src:r+(t.url||t),alt:e,title:t.tooltip||e})),u.children.length>=n&&(u=De("div"),Re(c,u))}),!e&&o.emoticons.more&&(Re(t=De("a",{className:"sceditor-more"}),document.createTextNode(p._("More"))),Fe(t,"click",function(e){p.createDropDown(f,"more-emoticons",h(!0)),e.preventDefault()}),Re(c,t)),c};p.createDropDown(f,"emoticons",h(!1))},txtExec:function(e){mt.emoticon.exec.call(this,e)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(i,e,l){var a=De("div");Re(a,ht("youtubeMenu",{label:i._("Video URL:"),insert:i._("Insert")},!0)),Fe(a,"click",".button",function(e){var t=He(a,"#link")[0].value,n=t.match(/(?:v=|v\/|embed\/|youtu.be\/)(.{11})/),o=t.match(/[&|?](?:star)?t=((\d+[hms]?){1,3})/),r=0;o&&Ee(o[1].split(/[hms]/),function(e,t){""!==t&&(r=60*r+Number(t))}),n&&/^[a-zA-Z0-9_\-]{11}$/.test(n[1])&&l(n[1],r),i.closeDropDown(!0),e.preventDefault()}),i.createDropDown(e,"insertlink",a)},exec:function(e){var n=this;mt.youtube._dropDown(n,e,function(e,t){n.wysiwygEditorInsertHtml(ht("youtube",{id:e,time:t}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1,r=t.getDate();return n<2e3&&(n=1900+n),o<10&&(o="0"+o),r<10&&(r="0"+r),e.opts.dateFormat.replace(/year/i,n).replace(/month/i,o).replace(/day/i,r)},exec:function(){this.insertText(mt.date._date(this))},txtExec:function(){this.insertText(mt.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return t<10&&(t="0"+t),n<10&&(n="0"+n),o<10&&(o="0"+o),t+":"+n+":"+o},exec:function(){this.insertText(mt.time._time())},txtExec:function(){this.insertText(mt.time._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!qe(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!qe(t,"body")))&&je(t,"direction","ltr"===je(t,"direction")?"":"ltr")},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!qe(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!qe(t,"body")))&&je(t,"direction","rtl"===je(t,"direction")?"":"rtl")},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize())},txtExec:function(){this.maximize(!this.maximize())},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode()},txtExec:function(){this.toggleSourceMode()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},ignore:{}},k={};function gt(i){var r=this,l=[],a=function(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)},e=function(e,t){e=[].slice.call(e);var n,o,r=a(e.shift());for(n=0;n<l.length;n++)if(r in l[n]&&(o=l[n][r].apply(i,e),t))return o};r.call=function(){e(arguments,!1)},r.callOnlyFirst=function(){return e(arguments,!0)},r.hasHandler=function(e){var t=l.length;for(e=a(e);t--;)if(e in l[t])return!0;return!1},r.exists=function(e){return e in k&&"function"==typeof(e=k[e])&&"object"==typeof e.prototype},r.isRegistered=function(e){if(r.exists(e))for(var t=l.length;t--;)if(l[t]instanceof k[e])return!0;return!1},r.register=function(e){return!(!r.exists(e)||r.isRegistered(e)||(e=new k[e],l.push(e),"init"in e&&e.init.call(i),0))},r.deregister=function(e){var t,n=l.length,o=!1;if(!r.isRegistered(e))return o;for(;n--;)l[n]instanceof k[e]&&(o=!0,"destroy"in(t=l.splice(n,1)[0])&&t.destroy.call(i));return o},r.destroy=function(){for(var e=l.length;e--;)"destroy"in l[e]&&l[e].destroy.call(i);l=[],i=null}}gt.plugins=k;var C=v&&v<11,E=function(e,t,n){var o,r,i,l,a,s="",c=e.startContainer,u=e.startOffset;for(c&&3!==c.nodeType&&(c=c.childNodes[u],u=0),i=l=u;n>s.length&&c&&3===c.nodeType;)o=c.nodeValue,r=n-s.length,a&&(l=o.length,i=0),a=c,c=t?(u=i=Math.max(l-r,0),s=o.substr(i,l-i)+s,a.previousSibling):(u=i+(l=Math.min(r,o.length)),s+=o.substr(i,l),a.nextSibling);return{node:a||c,offset:u,text:s}};function vt(i,e){var l,a,s=e||i.contentDocument||i.document,c="sceditor-start-marker",u="sceditor-end-marker",y=this;y.insertHTML=function(e,t){var n,o;if(!y.selectedRange())return!1;for(t&&(e+=y.selectedHtml()+t),o=De("p",{},s),n=s.createDocumentFragment(),o.innerHTML=e;o.firstChild;)Re(n,o.firstChild);y.insertNode(n)},a=function(e,t,n){var o,r=s.createDocumentFragment();if("string"==typeof e?(t&&(e+=y.selectedHtml()+t),r=et(e)):(Re(r,e),t&&(Re(r,y.selectedRange().extractContents()),Re(r,t))),o=r.lastChild){for(;!rt(o.lastChild,!0);)o=o.lastChild;if(ot(o)?o.lastChild||Re(o,document.createTextNode("​")):o=r,y.removeMarkers(),Re(o,l(c)),Re(o,l(u)),n){var i=De("div");return Re(i,r),i.innerHTML}return r}},y.insertNode=function(e,t){var n=a(e,t),o=y.selectedRange(),r=o.commonAncestorContainer;if(!n)return!1;o.deleteContents(),r&&3!==r.nodeType&&!ot(r)?Ve(n,r):o.insertNode(n),y.restoreRange()},y.cloneSelected=function(){var e=y.selectedRange();if(e)return e.cloneRange()},y.selectedRange=function(){var e,t,n=i.getSelection();if(n){if(n.rangeCount<=0){for(t=s.body;t.firstChild;)t=t.firstChild;(e=s.createRange()).setStartBefore(t),n.addRange(e)}return 0<n.rangeCount&&(e=n.getRangeAt(0)),e}},y.hasSelection=function(){var e=i.getSelection();return e&&0<e.rangeCount},y.selectedHtml=function(){var e,t=y.selectedRange();return t?(Re(e=De("p",{},s),t.cloneContents()),e.innerHTML):""},y.parentNode=function(){var e=y.selectedRange();if(e)return e.commonAncestorContainer},y.getFirstBlockParent=function(e){var t=function(e){return rt(e,!0)&&(e=e?e.parentNode:null)?t(e):e};return t(e||y.parentNode())},y.insertNodeAt=function(e,t){var n=y.selectedRange(),o=y.cloneSelected();if(!o)return!1;o.collapse(e),o.insertNode(t),y.selectRange(n)},l=function(e){y.removeMarker(e);var t=De("span",{id:e,className:"sceditor-selection sceditor-ignore",style:"display:none;line-height:0"},s);return t.innerHTML=" ",t},y.insertMarkers=function(){var e=y.selectedRange(),t=l(c);y.removeMarkers(),y.insertNodeAt(!0,t),e&&e.collapsed?t.parentNode.insertBefore(l(u),t.nextSibling):y.insertNodeAt(!1,l(u))},y.getMarker=function(e){return s.getElementById(e)},y.removeMarker=function(e){var t=y.getMarker(e);t&&Be(t)},y.removeMarkers=function(){y.removeMarker(c),y.removeMarker(u)},y.saveRange=function(){y.insertMarkers()},y.selectRange=function(e){var t,n=i.getSelection(),o=e.endContainer;if(!C&&e.collapsed&&o&&!rt(o,!0)){for(t=o.lastChild;t&&qe(t,".sceditor-ignore");)t=t.previousSibling;if(qe(t,"br")){var r=s.createRange();r.setEndAfter(t),r.collapse(!1),y.compare(e,r)&&(e.setStartBefore(t),e.collapse(!0))}}n&&(y.clear(),n.addRange(e))},y.restoreRange=function(){var e,t=y.selectedRange(),n=y.getMarker(c),o=y.getMarker(u);if(!n||!o||!t)return!1;e=n.nextSibling===o,(t=s.createRange()).setStartBefore(n),t.setEndAfter(o),e&&t.collapse(!0),y.selectRange(t),y.removeMarkers()},y.selectOuterText=function(e,t){var n,o,r=y.cloneSelected();if(!r)return!1;r.collapse(!1),n=E(r,!0,e),o=E(r,!1,t),r.setStart(n.node,n.offset),r.setEnd(o.node,o.offset),y.selectRange(r)},y.getOuterText=function(e,t){var n=y.cloneSelected();return n?(n.collapse(!e),E(n,e,t).text):""},y.replaceKeyword=function(e,t,n,o,r,i){n||e.sort(function(e,t){return e[0].length-t[0].length});var l,a,s,c,u,d,f,p,h="(^|[\\s    ])",m=e.length,g=r?1:0,v=o||e[m-1][0].length;for(r&&v++,i=i||"",u=(l=y.getOuterText(!0,v)).length,l+=i,t&&(l+=y.getOuterText(!1,v));m--;)if(p=(f=e[m][0]).length,c=Math.max(0,u-p-g),s=-1,r?(a=l.substr(c).match(new RegExp(h+ft(f)+h)))&&(s=a.index+c+a[1].length):s=l.indexOf(f,c),-1<s&&s<=u&&u<=s+p+g)return d=u-s,y.selectOuterText(d,p-d-(/^\S/.test(i)?1:0)),y.insertHTML(e[m][1]),!0;return!1},y.compare=function(e,t){return t||(t=y.selectedRange()),e&&t?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):!e&&!t},y.clear=function(){var e=i.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())}}var yt=window,bt=document,xt=v,wt=xt&&xt<11,kt=/^image\/(p?jpe?g|gif|png|bmp)$/i;function Ct(a,e){var l,w,u,s,i,h,d,c,f,p,m,g,t,v,r,y,b,x,k,n,o,C,E,S,T,D,M,N,B,R,H,I,F,z,A,O,_,L,j,P,q,V,W,$,U,Y,K,X,Q,G,J,Z,ee,te,ne,oe,re,ie,le,ae,se,ce,ue,de=this,fe={},pe=[],he=[],me={},ge={},ve={};de.commands=ke(!0,{},e.commands||mt);var ye=de.opts=ke(!0,{},st,e);de.opts.emoticons=e.emoticons||st.emoticons,M=function(){a._sceditor=de,ye.locale&&"en"!==ye.locale&&F(),Ve(w=De("div",{className:"sceditor-container"}),a),je(w,"z-index",ye.zIndex),xt&&$e(w,"ie ie"+xt),n=a.required,a.required=!1;var e=Ct.formats[ye.format];"init"in(l=e?new e:{})&&l.init.call(de),I(),L(),z(),H(),A(),O(),dt||de.toggleSourceMode(),G();var t=function(){ze(yt,"load",t),ye.autofocus&&ne(),ue(),Z(),r.call("ready"),"onReady"in l&&l.onReady.call(de)};Fe(yt,"load",t),"complete"===bt.readyState&&t()},I=function(){var e=ye.plugins;e=e?e.toString().split(","):[],r=new gt(de),e.forEach(function(e){r.register(e.trim())})},F=function(){var e;(t=Ct.locale[ye.locale])||(e=ye.locale.split("-"),t=Ct.locale[e[0]]),t&&t.dateFormat&&(ye.dateFormat=t.dateFormat)},H=function(){c=De("textarea"),s=De("iframe",{frameborder:0,allowfullscreen:!0}),ye.startInSourceMode?($e(w,"sourceMode"),Oe(s)):($e(w,"wysiwygMode"),Oe(c)),ye.spellcheck||Ae(w,"spellcheck","false"),"https:"===yt.location.protocol&&Ae(s,"src","javascript:false"),Re(w,s),Re(w,c),de.dimensions(ye.width||Ke(a),ye.height||Xe(a));var e=xt?"ie ie"+xt:"";e+=ut?" ios":"",(d=s.contentDocument).open(),d.write(ht("html",{attrs:' class="'+e+'"',spellcheck:ye.spellcheck?"":'spellcheck="false"',charset:ye.charset,style:ye.style})),d.close(),h=d.body,i=s.contentWindow,de.readOnly(!!ye.readOnly),(ut||ct||xt)&&(Xe(h,"100%"),xt||Fe(h,"touchend",de.focus));var t=Ae(a,"tabindex");Ae(c,"tabindex",t),Ae(s,"tabindex",t),v=new vt(i),Oe(a),de.val(a.value);var n=ye.placeholder||Ae(a,"placeholder");n&&(c.placeholder=n,Ae(h,"placeholder",n))},A=function(){ye.autoUpdate&&(Fe(h,"blur",ce),Fe(c,"blur",ce)),null===ye.rtl&&(ye.rtl="rtl"===je(c,"direction")),de.rtl(!!ye.rtl),ye.autoExpand&&(Fe(h,"load",ue,Ie),Fe(h,"input keyup",ue)),ye.resizeEnabled&&_(),Ae(w,"id",ye.id),de.emoticons(ye.emoticonsEnabled)},O=function(){var e=a.form,t="compositionstart compositionend",n="keydown keyup keypress focus blur contextmenu",o="onselectionchange"in d?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";Fe(bt,"click",X),e&&(Fe(e,"reset",$),Fe(e,"submit",de.updateOriginal,Ie)),Fe(h,"keypress",W),Fe(h,"keydown",q),Fe(h,"keydown",V),Fe(h,"keyup",Z),Fe(h,"blur",ae),Fe(h,"keyup",se),Fe(h,"paste",j),Fe(h,t,Y),Fe(h,o,ee),Fe(h,n,K),ye.emoticonsCompat&&yt.getSelection&&Fe(h,"keyup",re),Fe(h,"blur",function(){de.val()||$e(h,"placeholder")}),Fe(h,"focus",function(){Ue(h,"placeholder")}),Fe(c,"blur",ae),Fe(c,"keyup",se),Fe(c,"keydown",q),Fe(c,t,Y),Fe(c,n,K),Fe(d,"mousedown",U),Fe(d,o,ee),Fe(d,"beforedeactivate keyup mouseup",R),Fe(d,"keyup",Z),Fe(d,"focus",function(){p=null}),Fe(w,"selectionchanged",te),Fe(w,"selectionchanged",G),Fe(w,"selectionchanged valuechanged nodechanged pasteraw paste",K)},z=function(){var i,l=de.commands,a=(ye.toolbarExclude||"").split(","),e=ye.toolbar.split("|");u=De("div",{className:"sceditor-toolbar",unselectable:"on"}),ye.icons in Ct.icons&&(D=new Ct.icons[ye.icons]),Ee(e,function(e,t){i=De("div",{className:"sceditor-group"}),Ee(t.split(","),function(e,t){var n,o,r=l[t];!r||-1<a.indexOf(t)||(o=r.shortcut,n=ht("toolbarButton",{name:t,dispName:de._(r.name||r.tooltip||t)},!0).firstChild,D&&D.create&&D.create(t)&&(Ve(D.create(t),n.firstChild),$e(n,"has-icon")),n._sceTxtMode=!!r.txtExec,n._sceWysiwygMode=!!r.exec,Ye(n,"disabled",!r.exec),Fe(n,"click",function(e){We(n,"disabled")||B(n,r),G(),e.preventDefault()}),Fe(n,"mousedown",function(e){de.closeDropDown(),e.preventDefault()}),r.tooltip&&Ae(n,"title",de._(r.tooltip)+(o?" ("+o+")":"")),o&&de.addShortcut(o,t),r.state?he.push({name:t,state:r.state}):be(r.exec)&&he.push({name:t,state:r.exec}),Re(i,n),ge[t]=n)}),i.firstChild&&Re(u,i)}),Re(ye.toolbarContainer||w,u)},_=function(){var o,r,i,l,t,n,e=De("div",{className:"sceditor-grip"}),a=De("div",{className:"sceditor-resize-cover"}),s="touchmove mousemove",c="touchcancel touchend mouseup",u=0,d=0,f=0,p=0,h=0,m=0,g=Ke(w),v=Xe(w),y=!1,b=de.rtl();if(o=ye.resizeMinHeight||v/1.5,r=ye.resizeMaxHeight||2.5*v,i=ye.resizeMinWidth||g/1.25,l=ye.resizeMaxWidth||1.25*g,t=function(e){p="touchmove"===e.type?(e=yt.event,f=e.changedTouches[0].pageX,e.changedTouches[0].pageY):(f=e.pageX,e.pageY);var t=m+(p-d),n=b?h-(f-u):h+(f-u);0<l&&l<n&&(n=l),0<i&&n<i&&(n=i),ye.resizeWidth||(n=!1),0<r&&r<t&&(t=r),0<o&&t<o&&(t=o),ye.resizeHeight||(t=!1),(n||t)&&de.dimensions(n,t),e.preventDefault()},n=function(e){y&&(y=!1,Oe(a),Ue(w,"resizing"),ze(bt,s,t),ze(bt,c,n),e.preventDefault())},D&&D.create){var x=D.create("grip");x&&(Re(e,x),$e(e,"has-icon"))}Re(w,e),Re(w,a),Oe(a),Fe(e,"touchstart mousedown",function(e){d="touchstart"===e.type?(e=yt.event,u=e.touches[0].pageX,e.touches[0].pageY):(u=e.pageX,e.pageY),h=Ke(w),m=Xe(w),y=!0,$e(w,"resizing"),_e(a),Fe(bt,s,t),Fe(bt,c,n),e.preventDefault()})},L=function(){var e=ye.emoticons,n=ye.emoticonsRoot||"";e&&(ve=ke({},e.more,e.dropdown,e.hidden)),Ee(ve,function(e,t){ve[e]=ht("emoticon",{key:e,url:n+(t.url||t),tooltip:t.tooltip||e}),ye.emoticonsEnabled&&pe.push(De("img",{src:n+(t.url||t)}))})},ne=function(){var e,t,n=h.firstChild,o=!!ye.autofocusEnd;if(Ge(w)){if(de.sourceMode())return t=o?c.value.length:0,void c.setSelectionRange(t,t);if(lt(h),o)for((n=h.lastChild)||(n=De("p",{},d),Re(h,n));n.lastChild;)n=n.lastChild,!wt&&qe(n,"br")&&n.previousSibling&&(n=n.previousSibling);e=d.createRange(),ot(n)?e.selectNodeContents(n):(e.setStartBefore(n),o&&e.setStartAfter(n)),e.collapse(!o),v.selectRange(e),x=e,o&&(h.scrollTop=h.scrollHeight),de.focus()}},de.readOnly=function(e){return"boolean"!=typeof e?!c.readonly:(h.contentEditable=!e,c.readonly=!e,Q(e),de)},de.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===Ae(c,"dir"):(Ae(h,"dir",t),Ae(c,"dir",t),Ue(w,"rtl"),Ue(w,"ltr"),$e(w,t),D&&D.rtl&&D.rtl(e),de)},Q=function(n){var o=de.inSourceMode()?"_sceTxtMode":"_sceWysiwygMode";Ee(ge,function(e,t){Ye(t,"disabled",n||!t[o])})},de.width=function(e,t){return e||0===e?(de.dimensions(e,null,t),de):Ke(w)},de.dimensions=function(e,t,n){return t=!(!t&&0!==t)&&t,!1===(e=!(!e&&0!==e)&&e)&&!1===t?{width:de.width(),height:de.height()}:(!1!==e&&(!1!==n&&(ye.width=e),Ke(w,e)),!1!==t&&(!1!==n&&(ye.height=t),Xe(w,t)),de)},de.height=function(e,t){return e||0===e?(de.dimensions(null,e,t),de):Xe(w)},de.maximize=function(e){var t="sceditor-maximize";return xe(e)?We(w,t):((e=!!e)&&(S=yt.pageYOffset),Ye(bt.documentElement,t,e),Ye(bt.body,t,e),Ye(w,t,e),de.width(e?"100%":ye.width,!1),de.height(e?"100%":ye.height,!1),e||yt.scrollTo(0,S),ue(),de)},ue=function(){ye.autoExpand&&!E&&(E=setTimeout(de.expandToContent,200))},de.expandToContent=function(e){if(!de.maximize()){if(clearTimeout(E),E=!1,!C){var t=ye.resizeMinHeight||ye.height||Xe(a);C={min:t,max:ye.resizeMaxHeight||2*t}}var n=bt.createRange();n.selectNodeContents(h);var o=n.getBoundingClientRect(),r=d.documentElement.clientHeight-1,i=o.bottom-o.top,l=de.height()+1+(i-r);e||-1===C.max||(l=Math.min(l,C.max)),de.height(Math.ceil(Math.max(l,C.min)))}},de.destroy=function(){if(r){r.destroy(),r=p=v=null,f&&Be(f),ze(bt,"click",X);var e=a.form;e&&(ze(e,"reset",$),ze(e,"submit",de.updateOriginal)),Be(c),Be(u),Be(w),delete a._sceditor,_e(a),a.required=n}},de.createDropDown=function(e,t,n,o){var r,i="sceditor-"+t;de.closeDropDown(!0),f&&We(f,i)||(!1!==o&&Ee(He(n,":not(input):not(textarea)"),function(e,t){t.nodeType===Se&&Ae(t,"unselectable","on")}),r=ke({top:e.offsetTop,left:e.offsetLeft,marginTop:e.clientHeight},ye.dropDownCss),je(f=De("div",{className:"sceditor-dropdown "+i}),r),Re(f,n),Re(w,f),Fe(f,"click focusin",function(e){e.stopPropagation()}),setTimeout(function(){if(f){var e=He(f,"input,textarea")[0];e&&e.focus()}}))},X=function(e){3!==e.which&&f&&!e.defaultPrevented&&(ce(),de.closeDropDown())},j=function(e){var t,n,o=xt||ct,r=h,i=e.clipboardData;if(i&&!o){var l={},a=i.types,s=i.items;e.preventDefault();for(var c=0;c<a.length;c++){if(yt.FileReader&&s&&kt.test(s[c].type))return t=i.items[c].getAsFile(),n=void 0,(n=new FileReader).onload=function(e){P({html:'<img src="'+e.target.result+'" />'})},void n.readAsDataURL(t);l[a[c]]=i.getData(a[c])}l.text=l["text/plain"],l.html=l["text/html"],P(l)}else if(!T){var u=r.scrollTop;for(v.saveRange(),T=bt.createDocumentFragment();r.firstChild;)Re(T,r.firstChild);setTimeout(function(){var e=r.innerHTML;r.innerHTML="",Re(r,T),r.scrollTop=u,T=!1,v.restoreRange(),P({html:e})},0)}},P=function(e){var t=De("div",{},d);r.call("pasteRaw",e),Qe(w,"pasteraw",e),e.html?(t.innerHTML=e.html,it(t)):t.innerHTML=pt(e.text||"");var n={val:t.innerHTML};"fragmentToSource"in l&&(n.val=l.fragmentToSource(n.val,d,y)),r.call("paste",n),Qe(w,"paste",n),"fragmentToHtml"in l&&(n.val=l.fragmentToHtml(n.val,y)),r.call("pasteHtml",n),de.wysiwygEditorInsertHtml(n.val,null,!0)},de.closeDropDown=function(e){f&&(Be(f),f=null),!0===e&&de.focus()},de.wysiwygEditorInsertHtml=function(e,t,n){var o,r,i,l=Xe(s);de.focus(),!n&&Ne(b,"code")||(v.insertHTML(e,t),v.saveRange(),N(),_e(o=He(h,"#sceditor-end-marker")[0]),r=h.scrollTop,i=at(o).top+1.5*o.offsetHeight-l,Oe(o),(r<i||i+l<r)&&(h.scrollTop=i),le(!1),v.restoreRange(),Z())},de.wysiwygEditorInsertText=function(e,t){de.wysiwygEditorInsertHtml(pt(e),pt(t))},de.insertText=function(e,t){return de.inSourceMode()?de.sourceEditorInsertText(e,t):de.wysiwygEditorInsertText(e,t),de},de.sourceEditorInsertText=function(e,t){var n,o,r=c.selectionStart,i=c.selectionEnd;n=c.scrollTop,c.focus(),o=c.value,t&&(e+=o.substring(r,i)+t),c.value=o.substring(0,r)+e+o.substring(i,o.length),c.selectionStart=r+e.length-(t?t.length:0),c.selectionEnd=c.selectionStart,c.scrollTop=n,c.focus(),le()},de.getRangeHelper=function(){return v},de.sourceEditorCaret=function(e){return c.focus(),e?(c.selectionStart=e.start,c.selectionEnd=e.end,this):{start:c.selectionStart,end:c.selectionEnd}},de.val=function(e,t){return be(e)?(de.inSourceMode()?de.setSourceEditorValue(e):(!1!==t&&"toHtml"in l&&(e=l.toHtml(e)),de.setWysiwygEditorValue(e)),de):de.inSourceMode()?de.getSourceEditorValue(!1):de.getWysiwygEditorValue(t)},de.insert=function(e,t,n,o,r){if(de.inSourceMode())return de.sourceEditorInsertText(e,t),de;if(t){var i=v.selectedHtml();!1!==n&&"fragmentToSource"in l&&(i=l.fragmentToSource(i,d,y)),e+=i+t}return!1!==n&&"fragmentToHtml"in l&&(e=l.fragmentToHtml(e,y)),!1!==n&&!0===r&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),de.wysiwygEditorInsertHtml(e),de},de.getWysiwygEditorValue=function(e){for(var t,n=De("div",{},d),o=h.childNodes,r=0;r<o.length;r++)Re(n,o[r].cloneNode(!0));return Re(h,n),it(n),Be(n),t=n.innerHTML,!1!==e&&l.hasOwnProperty("toSource")&&(t=l.toSource(t,d)),t},de.getBody=function(){return h},de.getContentAreaContainer=function(){return s},de.getSourceEditorValue=function(e){var t=c.value;return!1!==e&&"toHtml"in l&&(t=l.toHtml(t)),t},de.setWysiwygEditorValue=function(e){e||(e="<p>"+(xt?"":"<br />")+"</p>"),h.innerHTML=e,N(),Z(),le(),ue()},de.setSourceEditorValue=function(e){c.value=e,le()},de.updateOriginal=function(){a.value=de.val()},N=function(){var e,c,u,d,t,f,p;ye.emoticonsEnabled&&(e=h,c=ve,u=ye.emoticonsCompat,d=e.ownerDocument,t="(^|\\s| | | | |$)",f=[],p={},Me(e,"code")||(Ee(c,function(e){p[e]=new RegExp(t+ft(e)+t),f.push(e)}),f.sort(function(e,t){return t.length-e.length}),function e(t){for(t=t.firstChild;t;){if(t.nodeType!==Se||qe(t,"code")||e(t),t.nodeType===Te)for(var n=0;n<f.length;n++){var o=t.nodeValue,r=f[n],i=u?o.search(p[r]):o.indexOf(r);if(-1<i){var l=o.indexOf(r,i),a=et(c[r],d),s=o.substr(l+r.length);a.appendChild(d.createTextNode(s)),t.nodeValue=o.substr(0,l),t.parentNode.insertBefore(a,t.nextSibling)}}t=t.nextSibling}}(e)))},de.inSourceMode=function(){return We(w,"sourceMode")},de.sourceMode=function(e){var t=de.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&de.toggleSourceMode(),de)},de.toggleSourceMode=function(){var e=de.inSourceMode();!dt&&e||(e||(v.saveRange(),v.clear()),de.blur(),e?de.setWysiwygEditorValue(de.getSourceEditorValue()):de.setSourceEditorValue(de.getWysiwygEditorValue()),p=null,Le(c),Le(s),Ye(w,"wysiwygMode",e),Ye(w,"sourceMode",!e),Q(),G())},J=function(){return c.focus(),c.value.substring(c.selectionStart,c.selectionEnd)},B=function(e,t){de.inSourceMode()?t.txtExec&&(Array.isArray(t.txtExec)?de.sourceEditorInsertText.apply(de,t.txtExec):t.txtExec.call(de,e,J())):t.exec&&(we(t.exec)?t.exec.call(de,e):de.execCommand(t.exec,t.hasOwnProperty("execParam")?t.execParam:null))},R=function(){xt&&(p=v.selectedRange())},de.execCommand=function(e,t){var n=!1,o=de.commands[e];if(de.focus(),!Ne(v.parentNode(),"code")){try{n=d.execCommand(e,!1,t)}catch(e){}!n&&o&&o.errorMessage&&alert(de._(o.errorMessage)),G()}},ee=function(){function e(){if(i.getSelection()&&i.getSelection().rangeCount<=0)x=null;else if(v&&!v.compare(x)){if((x=v.cloneSelected())&&x.collapsed){var e=x.startContainer,t=x.startOffset;for(t&&e.nodeType!==Te&&(e=e.childNodes[t]);e&&e.parentNode!==h;)e=e.parentNode;e&&rt(e,!0)&&(v.saveRange(),n=d,Je(h,function(e){rt(e,!0)?(o||Ve(o=De("p",{},n),e),e.nodeType===Te&&""===e.nodeValue||Re(o,e)):o=null},!1,!0),v.restoreRange())}Qe(w,"selectionchanged")}var n,o;k=!1}k||(k=!0,"onselectionchange"in d?e():setTimeout(e,100))},te=function(){var e,t=v.parentNode();y!==t&&(e=y,y=t,b=v.getFirstBlockParent(t),Qe(w,"nodechanged",{oldNode:e,newNode:y}))},de.currentNode=function(){return y},de.currentBlockNode=function(){return b},G=function(){var e,t,n="active",o=d,r=de.sourceMode();if(de.readOnly())Ee(He(u,n),function(e,t){Ue(t,n)});else{r||(t=v.parentNode(),e=v.getFirstBlockParent(t));for(var i=0;i<he.length;i++){var l=0,a=ge[he[i].name],s=he[i].state,c=r&&!a._sceTxtMode||!r&&!a._sceWysiwygMode;if(be(s)){if(!r)try{-1<(l=o.queryCommandEnabled(s)?0:-1)&&(l=o.queryCommandState(s)?1:0)}catch(e){}}else c||(l=s.call(de,t,e));Ye(a,"disabled",c||l<0),Ye(a,n,0<l)}D&&D.update&&D.update(r,t,e)}},W=function(e){if(!e.defaultPrevented&&(de.closeDropDown(),13===e.which)&&!qe(b,"li,ul,ol")&&tt(b)){p=null;var t=De("br",{},d);if(v.insertNode(t),!wt){var n=t.parentNode,o=n.lastChild;o&&o.nodeType===Te&&""===o.nodeValue&&(Be(o),o=n.lastChild),!rt(n,!0)&&o===t&&rt(t.previousSibling)&&v.insertHTML("<br>")}e.preventDefault()}},Z=function(){Ze(h,function(e){if(e.nodeType===Se&&!/inline/.test(je(e,"display"))&&!qe(e,".sceditor-nlf")&&tt(e)){var t=De("p",{},d);return t.className="sceditor-nlf",t.innerHTML=wt?"":"<br />",Re(h,t),!1}if(3===e.nodeType&&!/^\s*$/.test(e.nodeValue)||qe(e,"br"))return!1})},$=function(){de.val(a.value)},U=function(){de.closeDropDown(),p=null},de._=function(){var n=arguments;return t&&t[n[0]]&&(n[0]=t[n[0]]),n[0].replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[t-0+1]?n[t-0+1]:"{"+t+"}"})},K=function(t){r&&r.call(t.type+"Event",t,de);var e=(t.target===c?"scesrc":"scewys")+t.type;fe[e]&&fe[e].forEach(function(e){e.call(de,t)})},de.bind=function(e,t,n,o){for(var r=(e=e.split(" ")).length;r--;)if(we(t)){var i="scewys"+e[r],l="scesrc"+e[r];n||(fe[i]=fe[i]||[],fe[i].push(t)),o||(fe[l]=fe[l]||[],fe[l].push(t)),"valuechanged"===e[r]&&(le.hasHandler=!0)}return de},de.unbind=function(e,t,n,o){for(var r=(e=e.split(" ")).length;r--;)we(t)&&(n||Ce(fe["scewys"+e[r]]||[],t),o||Ce(fe["scesrc"+e[r]]||[],t));return de},de.blur=function(e,t,n){return we(e)?de.bind("blur",e,t,n):de.sourceMode()?c.blur():h.blur(),de},de.focus=function(e,t,n){if(we(e))de.bind("focus",e,t,n);else if(de.inSourceMode())c.focus();else{if(He(d,":focus").length)return;var o,r=v.selectedRange();x||ne(),!wt&&r&&1===r.endOffset&&r.collapsed&&(o=r.endContainer)&&1===o.childNodes.length&&qe(o.firstChild,"br")&&(r.setStartBefore(o.firstChild),r.collapse(!0),v.selectRange(r)),i.focus(),h.focus(),p&&(v.selectRange(p),p=null)}return G(),de},de.keyDown=function(e,t,n){return de.bind("keydown",e,t,n)},de.keyPress=function(e,t,n){return de.bind("keypress",e,t,n)},de.keyUp=function(e,t,n){return de.bind("keyup",e,t,n)},de.nodeChanged=function(e){return de.bind("nodechanged",e,!1,!0)},de.selectionChanged=function(e){return de.bind("selectionchanged",e,!1,!0)},de.valueChanged=function(e,t,n){return de.bind("valuechanged",e,t,n)},oe=function(e){var n=0,o=de.emoticonsCache,t=String.fromCharCode(e.which);Ne(b,"code")||(o||(o=[],Ee(ve,function(e,t){o[n++]=[e,t]}),o.sort(function(e,t){return e[0].length-t[0].length}),de.emoticonsCache=o,de.longestEmoticonCode=o[o.length-1][0].length),v.replaceKeyword(de.emoticonsCache,!0,!0,de.longestEmoticonCode,ye.emoticonsCompat,t)&&(ye.emoticonsCompat&&/^\s$/.test(t)||e.preventDefault()))},re=function(){!function(e,t){var n=/[^\s\xA0\u2002\u2003\u2009\u00a0]+/,o=e&&He(e,"img[data-sceditor-emoticon]");if(e&&o.length)for(var r=0;r<o.length;r++){var i=o[r],l=i.parentNode,a=i.previousSibling,s=i.nextSibling;if(a&&n.test(a.nodeValue.slice(-1))||s&&n.test((s.nodeValue||"")[0])){var c=t.cloneSelected(),u=-1,d=c.startContainer,f=a.nodeValue;null===f&&(f=a.innerText||""),f+=Pe(i,"sceditor-emoticon"),d===s&&(u=f.length+c.startOffset),d===e&&e.childNodes[c.startOffset]===s&&(u=f.length),d===a&&(u=c.startOffset),s&&s.nodeType===Te||(s=l.insertBefore(l.ownerDocument.createTextNode(""),s)),s.insertData(0,f),Be(a),Be(i),-1<u&&(c.setStart(s,u),c.collapse(!0),t.selectRange(c))}}}(b,v)},de.emoticons=function(e){return e||!1===e?((ye.emoticonsEnabled=e)?(Fe(h,"keypress",oe),de.sourceMode()||(v.saveRange(),N(),le(!1),v.restoreRange())):(Ee(He(h,"img[data-sceditor-emoticon]"),function(e,t){var n=Pe(t,"sceditor-emoticon"),o=d.createTextNode(n);t.parentNode.replaceChild(o,t)}),ze(h,"keypress",oe),le()),de):ye.emoticonsEnabled},de.css=function(e){return o||(o=De("style",{id:"inline"},d),Re(d.head,o)),be(e)?(o.styleSheet?o.styleSheet.cssText=e:o.innerHTML=e,de):o.styleSheet?o.styleSheet.cssText:o.innerHTML},q=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},o={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},r=e.which,i={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[r]||String.fromCharCode(r).toLowerCase();(e.ctrlKey||e.metaKey)&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),o[r]?i=o[r]:n[i]&&(i=n[i])),i&&(r<16||18<r)&&t.push(i),t=t.join("+"),me[t]&&!1===me[t].call(de)&&(e.stopPropagation(),e.preventDefault())},de.addShortcut=function(e,t){return e=e.toLowerCase(),be(t)?me[e]=function(){return B(ge[t],de.commands[t]),!1}:me[e]=t,de},de.removeShortcut=function(e){return delete me[e.toLowerCase()],de},V=function(e){var t,n,o;if(!ye.disableBlockRemove&&8===e.which&&(n=v.selectedRange())&&(t=n.startContainer,0===n.startOffset&&(o=ie())&&!qe(o,"body"))){for(;t!==o;){for(;t.previousSibling;)if((t=t.previousSibling).nodeType!==Te||t.nodeValue)return;if(!(t=t.parentNode))return}de.clearBlockFormatting(o),e.preventDefault()}},ie=function(){for(var e=b;!tt(e)||rt(e,!0);)if(!(e=e.parentNode)||qe(e,"body"))return;return e},de.clearBlockFormatting=function(e){return!(e=e||ie())||qe(e,"body")||(v.saveRange(),e.className="",p=null,Ae(e,"style",""),qe(e,"p,div,td")||nt(e,"p"),v.restoreRange()),de},le=function(e){if(r&&(r.hasHandler("valuechangedEvent")||le.hasHandler)){var t,n=de.sourceMode(),o=!n&&v.hasSelection();e=(m=!1)!==e&&!d.getElementById("sceditor-start-marker"),g&&(clearTimeout(g),g=!1),o&&e&&v.saveRange(),(t=n?c.value:h.innerHTML)!==le.lastVal&&(le.lastVal=t,Qe(w,"valuechanged",{rawValue:n?de.val():t})),o&&e&&v.removeMarkers()}},ae=function(){g&&le()},se=function(e){var t=e.which,n=se.lastChar,o=13===n||32===n,r=8===n||46===n;se.lastChar=t,m||(13===t||32===t?o?se.triggerNext=!0:le():8===t||46===t?r?se.triggerNext=!0:le():se.triggerNext&&(le(),se.triggerNext=!1),clearTimeout(g),g=setTimeout(function(){m||le()},1500))},Y=function(e){(m=/start/i.test(e.type))||le()},ce=function(){de.updateOriginal()},M()}Ct.locale={},Ct.formats={},Ct.icons={},Ct.command={get:function(e){return mt[e]||null},set:function(e,t){return!(!e||!t)&&((t=ke(mt[e]||{},t)).remove=function(){Ct.command.remove(e)},mt[e]=t,this)},remove:function(e){return mt[e]&&delete mt[e],this}},window.sceditor={command:Ct.command,commands:mt,defaultOptions:st,ie:v,ios:ut,isWysiwygSupported:dt,regexEscape:ft,escapeEntities:pt,escapeUriScheme:function(e){var t,n=window.location;return e&&/^[^\/]*:/i.test(e)&&!y.test(e)?((t=n.pathname.split("/")).pop(),n.protocol+"//"+n.host+t.join("/")+"/"+e):e},dom:{css:je,attr:Ae,removeAttr:a,is:qe,closest:Ne,width:Ke,height:Xe,traverse:Je,rTraverse:Ze,parseHTML:et,hasStyling:tt,convertElement:nt,blockLevelList:c,canHaveChildren:ot,isInline:rt,copyCSS:u,fixNesting:it,findCommonAncestor:function(e,t){for(;e=e.parentNode;)if((n=e)!==(o=t)&&n.contains&&n.contains(o))return e;var n,o},getSibling:d,removeWhiteSpace:lt,extractContents:f,getOffset:at,getStyle:p,hasStyle:function(e,t,n){var o=p(e,t);return!!o&&(!n||o===n||Array.isArray(n)&&-1<n.indexOf(o))}},locale:Ct.locale,icons:Ct.icons,utils:{each:Ee,isEmptyObject:t,extend:ke},plugins:gt.plugins,formats:Ct.formats,create:function(e,t){t=t||{},Me(e,".sceditor-container")||(t.runWithoutWysiwygSupport||dt)&&new Ct(e,t)},instance:function(e){return e._sceditor}},o.sceditor=window.sceditor,o.fn.sceditor=function(e){var t,n=[];return this.each(function(){t=this._sceditor,"state"===e?n.push(!!t):"instance"===e?n.push(t):t||o.sceditor.create(this,e)}),n.length?1===n.length?n[0]:n:this}}(jQuery),function(e){"use strict";var f=e.escapeEntities,a=e.escapeUriScheme,h=e.dom,t=e.utils,m=h.css,g=h.attr,v=h.is,n=t.extend,s=t.each,o=e.ie,y=o&&o<11,b="data-sceditor-emoticon",i=e.command.get,x={always:1,never:2,auto:3},r={bold:{txtExec:["[b]","[/b]"]},italic:{txtExec:["[i]","[/i]"]},underline:{txtExec:["[u]","[/u]"]},strike:{txtExec:["[s]","[/s]"]},subscript:{txtExec:["[sub]","[/sub]"]},superscript:{txtExec:["[sup]","[/sup]"]},left:{txtExec:["[left]","[/left]"]},center:{txtExec:["[center]","[/center]"]},right:{txtExec:["[right]","[/right]"]},justify:{txtExec:["[justify]","[/justify]"]},font:{txtExec:function(e){var t=this;i("font")._dropDown(t,e,function(e){t.insertText("[font="+e+"]","[/font]")})}},size:{txtExec:function(e){var t=this;i("size")._dropDown(t,e,function(e){t.insertText("[size="+e+"]","[/size]")})}},color:{txtExec:function(e){var t=this;i("color")._dropDown(t,e,function(e){t.insertText("[color="+e+"]","[/color]")})}},bulletlist:{txtExec:function(e,t){var n="";s(t.split(/\r?\n/),function(){n+=(n?"\n":"")+"[li]"+this+"[/li]"}),this.insertText("[ul]\n"+n+"\n[/ul]")}},orderedlist:{txtExec:function(e,t){var n="";s(t.split(/\r?\n/),function(){n+=(n?"\n":"")+"[li]"+this+"[/li]"}),this.insertText("[ol]\n"+n+"\n[/ol]")}},table:{txtExec:["[table][tr][td]","[/td][/tr][/table]"]},horizontalrule:{txtExec:["[hr]"]},code:{txtExec:["[code]","[/code]"]},image:{txtExec:function(e,t){var r=this;i("image")._dropDown(r,e,t,function(e,t,n){var o="";t&&(o+=" width="+t),n&&(o+=" height="+n),r.insertText("[img"+o+"]"+e+"[/img]")})}},email:{txtExec:function(e,n){var o=this;i("email")._dropDown(o,e,function(e,t){o.insertText("[email="+e+"]"+(t||n||e)+"[/email]")})}},link:{txtExec:function(e,n){var o=this;i("link")._dropDown(o,e,function(e,t){o.insertText("[url="+e+"]"+(t||n||e)+"[/url]")})}},quote:{txtExec:["[quote]","[/quote]"]},youtube:{txtExec:function(e){var t=this;i("youtube")._dropDown(t,e,function(e){t.insertText("[youtube]"+e+"[/youtube]")})}},rtl:{txtExec:["[rtl]","[/rtl]"]},ltr:{txtExec:["[ltr]","[/ltr]"]}},w={b:{tags:{b:null,strong:null},styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{tags:{u:null},styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},font:{tags:{font:{face:null}},styles:{"font-family":null},quoteType:x.never,format:function(e,t){var n;return v(e,"font")&&(n=g(e,"face"))||(n=m(e,"font-family")),"[font="+E(n)+"]"+t+"[/font]"},html:'<font face="{defaultattr}">{0}</font>'},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(e,t){var n=g(e,"size"),o=2;return n||(n=m(e,"fontSize")),-1<n.indexOf("px")?((n=n.replace("px","")-0)<12&&(o=1),15<n&&(o=3),17<n&&(o=4),23<n&&(o=5),31<n&&(o=6),47<n&&(o=7)):o=n,"[size="+o+"]"+t+"[/size]"},html:'<font size="{defaultattr}">{!0}</font>'},color:{tags:{font:{color:null}},styles:{color:null},quoteType:x.never,format:function(e,t){var n;return v(e,"font")&&(n=g(e,"color"))||(n=e.style.color||m(e,"color")),"[color="+u(n)+"]"+t+"[/color]"},html:function(e,t,n){return'<font color="'+f(u(t.defaultattr),!0)+'">'+n+"</font>"}},ul:{tags:{ul:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{breakStart:!0,isInline:!1,skipLastLineBreak:!0,html:"<ul>{0}</ul>"},ol:{tags:{ol:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},isInline:!1,closedBy:["/ul","/ol","/list","*","li"],format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{isInline:!1,closedBy:["/ul","/ol","/list","*","li"],html:"<li>{0}</li>"},table:{tags:{table:null},isInline:!1,isHtmlInline:!0,skipLastLineBreak:!0,format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},isInline:!1,skipLastLineBreak:!0,format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},allowsEmpty:!0,isInline:!1,format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},allowsEmpty:!0,isInline:!1,format:"[td]{0}[/td]",html:"<td>{0}</td>"},emoticon:{allowsEmpty:!0,tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(e,t){return g(e,b)+t},html:"{0}"},hr:{tags:{hr:null},allowsEmpty:!0,isSelfClosing:!0,isInline:!1,format:"[hr]{0}",html:"<hr />"},img:{allowsEmpty:!0,tags:{img:{src:null}},allowedChildren:["#"],quoteType:x.never,format:function(t,e){var n,o,r="",i=function(e){return t.style?t.style[e]:null};return g(t,b)?e:(n=g(t,"width")||i("width"),o=g(t,"height")||i("height"),(t.complete&&(n||o)||n&&o)&&(r="="+h.width(t)+"x"+h.height(t)),"[img"+r+"]"+g(t,"src")+"[/img]")},html:function(e,t,n){var o,r,i,l="";return o=t.width,r=t.height,t.defaultattr&&(o=(i=t.defaultattr.split(/x/i))[0],r=2===i.length?i[1]:i[0]),void 0!==o&&(l+=' width="'+f(o,!0)+'"'),void 0!==r&&(l+=' height="'+f(r,!0)+'"'),"<img"+l+' src="'+a(n)+'" />'}},url:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:x.never,format:function(e,t){var n=g(e,"href");return"mailto:"===n.substr(0,7)?'[email="'+n.substr(7)+'"]'+t+"[/email]":"[url="+n+"]"+t+"[/url]"},html:function(e,t,n){return t.defaultattr=f(t.defaultattr,!0)||n,'<a href="'+a(t.defaultattr)+'">'+n+"</a>"}},email:{quoteType:x.never,html:function(e,t,n){return'<a href="mailto:'+(f(t.defaultattr,!0)||n)+'">'+n+"</a>"}},quote:{tags:{blockquote:null},isInline:!1,quoteType:x.never,format:function(e,t){for(var n,o="data-author",r="",i=e.children,l=0;!n&&l<i.length;l++)v(i[l],"cite")&&(n=i[l]);return(n||g(e,o))&&(r=n&&n.textContent||g(e,o),g(e,o,r),n&&e.removeChild(n),t=this.elementToBbcode(e),r="="+r.replace(/(^\s+|\s+$)/g,""),n&&e.insertBefore(n,e.firstChild)),"[quote"+r+"]"+t+"[/quote]"},html:function(e,t,n){return t.defaultattr&&(n="<cite>"+f(t.defaultattr)+"</cite>"+n),"<blockquote>"+n+"</blockquote>"}},code:{tags:{code:null},isInline:!1,allowedChildren:["#","#newline"],format:"[code]{0}[/code]",html:"<code>{0}</code>"},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isInline:!1,allowsEmpty:!0,format:"[left]{0}[/left]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isInline:!1,allowsEmpty:!0,format:"[center]{0}[/center]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isInline:!1,allowsEmpty:!0,format:"[right]{0}[/right]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isInline:!1,allowsEmpty:!0,format:"[justify]{0}[/justify]",html:'<div align="justify">{0}</div>'},youtube:{allowsEmpty:!0,tags:{iframe:{"data-youtube-id":null}},format:function(e,t){return(e=g(e,"data-youtube-id"))?"[youtube]"+e+"[/youtube]":t},html:'<iframe width="560" height="315" frameborder="0" src="https://www.youtube.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" allowfullscreen></iframe>'},rtl:{styles:{direction:["rtl"]},isInline:!1,format:"[rtl]{0}[/rtl]",html:'<div style="direction: rtl">{0}</div>'},ltr:{styles:{direction:["ltr"]},isInline:!1,format:"[ltr]{0}[/ltr]",html:'<div style="direction: ltr">{0}</div>'},ignore:{}};function k(e,o){return e.replace(/\{([^}]+)\}/g,function(e,t){var n=!0;return"!"===t.charAt(0)&&(n=!1,t=t.substring(1)),"0"===t&&(n=!1),void 0===o[t]?e:n?f(o[t],!0):o[t]})}function C(e){return"function"==typeof e}function E(e){return e?e.replace(/\\(.)/g,"$1").replace(/^(["'])(.*?)\1$/,"$2"):e}function S(e){var n=arguments;return e.replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[t-0+1]?n[t-0+1]:"{"+t+"}"})}var T="open",D="content",M="newline",N="close";function c(e,t,n,o,r,i){var l=this;l.type=e,l.name=t,l.val=n,l.attrs=o||{},l.children=r||[],l.closing=i||null}function B(e){var h=this;function l(e,t){var n,o,r;return e===T&&(n=t.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/))&&(r=i(n[1]),n[2]&&(n[2]=n[2].trim())&&(o=function(e){var t,n=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,o={};if("="===e.charAt(0)&&e.indexOf("=",1)<0)o.defaultattr=E(e.substr(1));else for("="===e.charAt(0)&&(e="defaultattr"+e);t=n.exec(e);)o[i(t[1])]=E(t[3])||t[4];return o}(n[2]))),e===N&&(n=t.match(/\[\/([^\[\]]+)\]/))&&(r=i(n[1])),e===M&&(r="#newline"),r&&(e!==T&&e!==N||w[r])||(e=D,r="#"),new c(e,r,t,o)}function p(e,t,n){for(var o=n.length;o--;)if(n[o].type===t&&n[o].name===e)return!0;return!1}function m(e,t){var n=(e?w[e.name]:{}).allowedChildren;return!h.opts.fixInvalidChildren||!n||-1<n.indexOf(t.name||"#")}function g(e,t,n){var o=/\s|=/.test(e);return C(t)?t(e,n):t===x.never||t===x.auto&&!o?e:'"'+e.replace("\\","\\\\").replace('"','\\"')+'"'}function v(e){return e.length?e[e.length-1]:null}function i(e){return e.toLowerCase()}h.opts=n({},B.defaults,e),h.tokenize=function(e){var t,n,o,r=[],i=[{type:D,regex:/^([^\[\r\n]+|\[)/},{type:M,regex:/^(\r\n|\r|\n)/},{type:T,regex:/^\[[^\[\]]+\]/},{type:N,regex:/^\[\/[^\[\]]+\]/}];e:for(;e.length;){for(o=i.length;o--;)if(n=i[o].type,(t=e.match(i[o].regex))&&t[0]){r.push(l(n,t[0])),e=e.substr(t[0].length);continue e}e.length&&r.push(l(D,e)),e=""}return r},h.parse=function(e,t){var n=function(e){var t,n,o,r,i,l,a=[],s=[],c=[],u=function(){return v(c)},d=function(e){u()?u().children.push(e):s.push(e)},f=function(e){return u()&&(n=w[u().name])&&n.closedBy&&-1<n.closedBy.indexOf(e)};for(;t=e.shift();)switch(l=e[0],m(u(),t)||t.type===N&&u()&&t.name===u().name||(t.name="#",t.type=D),t.type){case T:f(t.name)&&c.pop(),d(t),(n=w[t.name])&&!n.isSelfClosing&&(n.closedBy||p(t.name,N,e))?c.push(t):n&&n.isSelfClosing||(t.type=D);break;case N:if(u()&&t.name!==u().name&&f("/"+t.name)&&c.pop(),u()&&t.name===u().name)u().closing=t,c.pop();else if(p(t.name,T,c)){for(;o=c.pop();){if(o.name===t.name){o.closing=t;break}r=o.clone(),a.length&&r.children.push(v(a)),a.push(r)}for(l&&l.type===M&&(n=w[t.name])&&!1===n.isInline&&(d(l),e.shift()),d(v(a)),i=a.length;i--;)c.push(a[i]);a.length=0}else t.type=D,d(t);break;case M:u()&&l&&f((l.type===N?"/":"")+l.name)&&(l.type===N&&l.name===u().name||((n=w[u().name])&&n.breakAfter?c.pop():n&&!1===n.isInline&&h.opts.breakAfterBlock&&!1!==n.breakAfter&&c.pop())),d(t);break;default:d(t)}return s}(h.tokenize(e)),o=h.opts;return o.fixInvalidNesting&&function e(t,n,o,r){var i,l,a,s,c,u;var d=function(e){var t=w[e.name];return!t||!1!==t.isInline};n=n||[];r=r||t;for(l=0;l<t.length;l++)if((i=t[l])&&i.type===T){if(o&&!d(i)){if(a=v(n),u=a.splitAt(i),c=1<n.length?n[n.length-2].children:r,m(i,a)){var f=a.clone();f.children=i.children,i.children=[f]}if(-1<(s=c.indexOf(a))){u.children.splice(0,1),c.splice(s+1,0,i,u);var p=u.children[0];return void(p&&p.type===M&&(d(i)||(u.children.splice(0,1),c.splice(s+2,0,p))))}}n.push(i),e(i.children,n,o||d(i),r),n.pop()}}(n),function e(t,n,o){var r,i,l,a,s,c,u,d;var f=t.length;n&&(a=w[n.name]);var p=f;for(;p--;)if(r=t[p])if(r.type===M){if(i=0<p?t[p-1]:null,l=p<f-1?t[p+1]:null,d=!1,!o&&a&&!0!==a.isSelfClosing&&(i?c||l||(!1===a.isInline&&h.opts.breakEndBlock&&!1!==a.breakEnd&&(d=!0),a.breakEnd&&(d=!0),c=d):(!1===a.isInline&&h.opts.breakStartBlock&&!1!==a.breakStart&&(d=!0),a.breakStart&&(d=!0))),i&&i.type===T&&(s=w[i.name])&&(o?!1===s.isInline&&(d=!0):(!1===s.isInline&&h.opts.breakAfterBlock&&!1!==s.breakAfter&&(d=!0),s.breakAfter&&(d=!0))),!o&&!u&&l&&l.type===T&&(s=w[l.name])&&(!1===s.isInline&&h.opts.breakBeforeBlock&&!1!==s.breakBefore&&(d=!0),s.breakBefore&&(d=!0),u=d)){t.splice(p,1);continue}d&&t.splice(p,1),u=!1}else r.type===T&&e(r.children,r,o)}(n,null,t),o.removeEmptyTags&&function e(t){var n,o;var r=function(e){for(var t=e.length;t--;){var n=e[t].type;if(n===T||n===N)return!1;if(n===D&&/\S|\u00A0/.test(e[t].val))return!1}return!0};var i=t.length;for(;i--;)(n=t[i])&&n.type===T&&(o=w[n.name],e(n.children),r(n.children)&&o&&!o.isSelfClosing&&!o.allowsEmpty&&t.splice.apply(t,[i,1].concat(n.children)))}(n),n},h.toHTML=function(e,t){return function e(t,n){var o,r,i,l,a,s,c,u,d=[];c=function(e){return!1!==(!e||(void 0!==e.isHtmlInline?e.isHtmlInline:e.isInline))};for(;0<t.length;)if(o=t.shift()){if(o.type===T)u=o.children[o.children.length-1]||{},r=w[o.name],a=n&&c(r),i=e(o.children,!1),l=r&&r.html?(c(r)||!c(w[u.name])||r.isPreFormatted||r.skipLastLineBreak||y||(i+="<br />"),C(r.html)?r.html.call(h,o,o.attrs,i):(o.attrs[0]=i,k(r.html,o.attrs))):o.val+i+(o.closing?o.closing.val:"");else{if(o.type===M){if(!n){d.push("<br />");continue}s||d.push("<div>"),y||d.push("<br />"),t.length||d.push("<br />"),d.push("</div>\n"),s=!1;continue}a=n,l=f(o.val,!0)}a&&!s?(d.push("<div>"),s=!0):!a&&s&&(d.push("</div>\n"),s=!1),d.push(l)}s&&d.push("</div>\n");return d.join("")}(h.parse(e,t),!0)},h.toBBCode=function(e,t){return function e(t){var n,o,r,i,l,a,s,c,u,d,f=[];for(;0<t.length;)if(n=t.shift())if(r=w[n.name],i=!(!r||!1!==r.isInline),l=r&&r.isSelfClosing,s=i&&h.opts.breakBeforeBlock&&!1!==r.breakBefore||r&&r.breakBefore,c=i&&!l&&h.opts.breakStartBlock&&!1!==r.breakStart||r&&r.breakStart,u=i&&h.opts.breakEndBlock&&!1!==r.breakEnd||r&&r.breakEnd,d=i&&h.opts.breakAfterBlock&&!1!==r.breakAfter||r&&r.breakAfter,a=(r?r.quoteType:null)||h.opts.quoteType||x.auto,r||n.type!==T)if(n.type===T){if(s&&f.push("\n"),f.push("["+n.name),n.attrs)for(o in n.attrs.defaultattr&&(f.push("=",g(n.attrs.defaultattr,a,"defaultattr")),delete n.attrs.defaultattr),n.attrs)n.attrs.hasOwnProperty(o)&&f.push(" ",o,"=",g(n.attrs[o],a,o));f.push("]"),c&&f.push("\n"),n.children&&f.push(e(n.children)),l||r.excludeClosing||(u&&f.push("\n"),f.push("[/"+n.name+"]")),d&&f.push("\n"),n.closing&&l&&f.push(n.closing.val)}else f.push(n.val);else f.push(n.val),n.children&&f.push(e(n.children)),n.closing&&f.push(n.closing.val);return f.join("")}(h.parse(e,t))}}function l(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)).toString(16)).length<2?"0"+e:e}function u(e){var t;return(t=(e=e||"#000").match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))?"#"+l(t[1])+l(t[2])+l(t[3]):(t=e.match(/#([0-f])([0-f])([0-f])\s*?$/i))?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:e}function d(){var c=this;c.stripQuotes=E;var l={},a={},u={ul:["li","ol","ul"],ol:["li","ol","ul"],table:["tr"],tr:["td","th"],code:["br","p","div"]};function d(n,o,e){var r,i,l=h.getStyle;return a[e=!!e]&&s(a[e],function(e,t){(r=l(n,e))&&l(n.parentNode,e)!==r&&s(t,function(e,t){(!t||-1<t.indexOf(r.toString()))&&(i=w[e].format,o=C(i)?i.call(c,n,o):S(i,o))})}),o}function f(n,o,e){var r,i,t=n.nodeName.toLowerCase();return e=!!e,l[t]&&l[t][e]&&s(l[t][e],function(e,t){t&&(r=!1,s(t,function(e,t){if(g(n,e)&&!(t&&t.indexOf(g(n,e))<0))return!(r=!0)}),!r)||(i=w[e].format,o=C(i)?i.call(c,n,o):S(i,o))}),o}function p(e){var c=function(e,a){var s="";return h.traverse(e,function(e){var t="",n=e.nodeType,o=e.nodeName.toLowerCase(),r=u[o],i=e.firstChild,l=!0;if("object"==typeof a&&(l=-1<a.indexOf(o),v(e,"img")&&g(e,b)&&(l=!0),l||(r=a)),3===n||1===n)if(1===n){if(v(e,".sceditor-nlf")&&(!i||!y&&1===e.childNodes.length&&/br/i.test(i.nodeName)))return;"iframe"!==o&&(t=c(e,r)),l?("code"!==o&&(t=d(e,t=f(e,t=d(e,t)),!0)),t=f(e,t,!0),s+=function(e,t){var n=e.nodeName.toLowerCase(),o=h.isInline;if(!o(e,!0)||"br"===n){for(var r,i,l=e.previousSibling;l&&1===l.nodeType&&!v(l,"br")&&o(l,!0)&&!l.firstChild;)l=l.previousSibling;for(;r=((i=e.parentNode)&&i.lastChild)===e,(e=i)&&r&&o(i,!0););(!r||"li"===n||"br"===n&&y)&&(t+="\n"),"br"!==n&&l&&!v(l,"br")&&o(l,!0)&&(t="\n"+t)}return t}(e,t)):s+=t}else s+=e.nodeValue},!1,!0),s};return c(e)}function e(e,t,n){var o,r,i,l,a,s=new B(c.opts.parserOptions).toHTML(c.opts.bbcodeTrim?t.trim():t);return e||n?(o=s,a=document.createElement("div"),l=function(e,t){if(!h.hasStyling(e)){if(y||1!==e.childNodes.length||!v(e.firstChild,"br"))for(;i=e.firstChild;)a.insertBefore(i,e);if(t){var n=a.lastChild;e!==n&&v(n,"div")&&e.nextSibling===n&&a.insertBefore(document.createElement("br"),e)}a.removeChild(e)}},m(a,"display","none"),a.innerHTML=o.replace(/<\/div>\n/g,"</div>"),(r=a.firstChild)&&v(r,"div")&&l(r,!0),(r=a.lastChild)&&v(r,"div")&&l(r),a.innerHTML):s}function t(e,t,n,o){var r,i,l=(n=n||document).createElement("div"),a=n.createElement("div"),s=new B(c.opts.parserOptions);for(a.innerHTML=t,m(l,"visibility","hidden"),l.appendChild(a),n.body.appendChild(l),e&&(l.insertBefore(n.createTextNode("#"),l.firstChild),l.appendChild(n.createTextNode("#"))),o&&m(a,"whiteSpace",m(o,"whiteSpace")),i=a.getElementsByClassName("sceditor-ignore");i.length;)i[0].parentNode.removeChild(i[0]);return h.removeWhiteSpace(l),r=p(a),n.body.removeChild(l),r=s.toBBCode(r,!0),c.opts.bbcodeTrim&&(r=r.trim()),r}c.init=function(){c.opts=this.opts,c.elementToBbcode=p,s(w,function(n){var o,e=w[n].tags,t=w[n].styles;e&&s(e,function(e,t){o=!1===w[n].isInline,l[e]=l[e]||{},l[e][o]=l[e][o]||{},l[e][o][n]=t}),t&&s(t,function(e,t){o=!1===w[n].isInline,a[o]=a[o]||{},a[o][e]=a[o][e]||{},a[o][e][n]=t})}),this.commands=n(!0,{},r,this.commands),this.toBBCode=c.toSource,this.fromBBCode=c.toHtml},c.toHtml=e.bind(null,!1),c.fragmentToHtml=e.bind(null,!0),c.toSource=t.bind(null,!1),c.fragmentToSource=t.bind(null,!0)}c.prototype={clone:function(){var e=this;return new c(e.type,e.name,e.val,n({},e.attrs),[],e.closing?e.closing.clone():null)},splitAt:function(e){var t,n=this.clone(),o=this.children.indexOf(e);return-1<o&&(t=this.children.length-o,n.children=this.children.splice(o,t)),n}},B.QuoteType=x,B.defaults={breakBeforeBlock:!1,breakStartBlock:!1,breakEndBlock:!1,breakAfterBlock:!0,removeEmptyTags:!0,fixInvalidNesting:!0,fixInvalidChildren:!0,quoteType:x.auto},d.get=function(e){return w[e]||null},d.set=function(e,t){return e&&t&&((t=n(w[e]||{},t)).remove=function(){delete w[e]},w[e]=t),this},d.rename=function(e,t){return e in w&&(w[t]=w[e],delete w[e]),this},d.remove=function(e){return e in w&&delete w[e],this},d.formatBBCodeString=k,e.formats.bbcode=d,e.BBCodeParser=B}(sceditor);
=======
/* SCEditor v3.2.0 | (C) 2017, Sam Clarke | sceditor.com/license */
!function(){"use strict";var i=(t=jQuery)&&"object"==typeof t&&"default"in t?t:{default:t};function a(e,t){return typeof t===e}var ve=a.bind(null,"string"),Ke=a.bind(null,"undefined"),Xe=a.bind(null,"function"),l=a.bind(null,"number");function s(e){return!Object.keys(e).length}function be(e,t){var n=e===!!e,o=n?2:1,r=n?t:e,i=n&&e;function a(e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}for(;o<arguments.length;o++){var l,s=arguments[o];for(l in s){var c,u,d=r[l],f=s[l];Ke(f)||"__proto__"!==l&&"constructor"!==l&&(u=a(f),c=Array.isArray(f),i&&(u||c)?(u=a(d)===u&&Array.isArray(d)===c,r[l]=be(!0,u?d:c?[]:{},f)):r[l]=f)}}return r}function Qe(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function xe(t,n){if(Array.isArray(t)||"length"in t&&l(t.length))for(var e=0;e<t.length;e++)n(e,t[e]);else Object.keys(t).forEach(function(e){n(e,t[e])})}var c={},we=1,ke=3,u=8;function r(e){return e=parseFloat(e),isFinite(e)?e:0}function Te(e,t,n){var o=(n||document).createElement(e);return xe(t||{},function(e,t){"style"===e?o.style.cssText=t:e in o?o[e]=t:o.setAttribute(e,t)}),o}function Ze(e,t){for(var n=e||{};(n=n.parentNode)&&!/(9|11)/.test(n.nodeType);)if(!t||_e(n,t))return n}function Ce(e,t){return _e(e,t)?e:Ze(e,t)}function Ee(e){e.parentNode&&e.parentNode.removeChild(e)}function Se(e,t){e.appendChild(t)}function Ne(e,t){return e.querySelectorAll(t)}function De(n,e,o,r,i){e.split(" ").forEach(function(e){var t;ve(o)?(t=r["_sce-event-"+e+o]||function(e){for(var t=e.target;t&&t!==n;){if(_e(t,o))return void r.call(t,e);t=t.parentNode}},r["_sce-event-"+e+o]=t):(t=o,i=r),n.addEventListener(e,t,i||!1)})}function Ae(n,e,o,r,i){e.split(" ").forEach(function(e){var t;ve(o)?t=r["_sce-event-"+e+o]:(t=o,i=r),n.removeEventListener(e,t,i||!1)})}function Me(e,t,n){if(arguments.length<3)return e.getAttribute(t);null==n?Je(e,t):e.setAttribute(t,n)}function Je(e,t){e.removeAttribute(t)}function et(e){Re(e,"display","none")}function tt(e){Re(e,"display","")}function nt(e){(st(e)?et:tt)(e)}function Re(n,e,t){if(arguments.length<3){if(ve(e))return 1===n.nodeType?getComputedStyle(n)[e]:null;xe(e,function(e,t){Re(n,e,t)})}else{var o=(t||0===t)&&!isNaN(t);n.style[e]=o?t+"px":t}}function ot(e,t,n){var o=arguments.length,r={};if(e.nodeType===we)return 1===o?(xe(e.attributes,function(e,t){/^data\-/i.test(t.name)&&(r[t.name.substr(5)]=t.value)}),r):2===o?Me(e,"data-"+t):void Me(e,"data-"+t,String(n))}function _e(e,t){var n=!1;return e&&e.nodeType===we?(e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,t):n}function Oe(e,t){t.parentNode.insertBefore(e,t)}function d(e){return e.className.trim().split(/\s+/)}function rt(e,t){return _e(e,"."+t)}function Ie(e,t){var n=d(e);n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function it(e,t){var n=d(e);Qe(n,t),e.className=n.join(" ")}function Le(e,t,n){((n=Ke(n)?!rt(e,t):n)?Ie:it)(e,t)}function at(e,t){var n,o;if(Ke(t))return n=r((o=getComputedStyle(e)).paddingLeft)+r(o.paddingRight),o=r(o.borderLeftWidth)+r(o.borderRightWidth),e.offsetWidth-n-o;Re(e,"width",t)}function Fe(e,t){var n,o;if(Ke(t))return n=r((o=getComputedStyle(e)).paddingTop)+r(o.paddingBottom),o=r(o.borderTopWidth)+r(o.borderBottomWidth),e.offsetHeight-n-o;Re(e,"height",t)}function lt(e,t,n){var o;Xe(window.CustomEvent)?o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(o=e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function st(e){return e.getClientRects().length}function f(e,t,n,o,r){for(e=r?e.lastChild:e.firstChild;e;){var i=r?e.previousSibling:e.nextSibling;if(!n&&!1===t(e)||!o&&!1===f(e,t,n,o,r)||n&&!1===t(e))return!1;e=i}}function ct(e,t,n,o){f(e,t,n,o,!0)}function ut(e,t){var n=(t=t||document).createDocumentFragment(),o=Te("div",{},t);for(o.innerHTML=e;o.firstChild;)Se(n,o.firstChild);return n}function dt(e){return e&&(!_e(e,"p,div")||e.className||Me(e,"style")||!s(ot(e)))}function ft(e,t){var n=Te(t,{},e.ownerDocument);for(xe(e.attributes,function(e,t){try{Me(n,t.name,t.value)}catch(e){}});e.firstChild;)Se(n,e.firstChild);return e.parentNode.replaceChild(n,e),n}var p="|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|details|section|article|aside|nav|main|header|hgroup|footer|fieldset|dl|dt|dd|figure|figcaption|";function pt(e){return!!/11?|9/.test(e.nodeType)&&"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf("|"+e.nodeName.toLowerCase()+"|")<0}function Be(e,t){var n=(e||{}).nodeType||ke;return n!==we?n===ke:"code"===(n=e.tagName.toLowerCase())?!t:p.indexOf("|"+n+"|")<0}function m(e){return e.lastChild&&m(e.lastChild)&&Ee(e.lastChild),3===e.nodeType?!e.nodeValue:pt(e)&&!e.childNodes.length}function mt(e){f(e,function(e){var t=!Be(e,!0)&&e.nodeType!==u,n=e.parentNode;if(t&&(Be(n,!0)||"P"===n.tagName)){for(var o=e;Be(o.parentNode,!0)||"P"===o.parentNode.tagName;)o=o.parentNode;for(var r=g(o,e),i=e;n&&Be(n,!0);){if(n.nodeType===we){for(var a=n.cloneNode();i.firstChild;)Se(a,i.firstChild);Se(i,a)}n=n.parentNode}Oe(i,o),m(r)||Oe(r,i),m(o)&&Ee(o)}t&&_e(e,"ul,ol")&&_e(e.parentNode,"ul,ol")&&(t=(t=e).previousElementSibling,(t=(r="li")&&t&&!_e(t,r)?null:t)||Oe(t=Te("li"),e),Se(t,e))})}function h(e,t){return e?(t?e.previousSibling:e.nextSibling)||h(e.parentNode,t):null}function ht(e){var t,n,o,r,i,a,l=Re(e,"whiteSpace"),s=/line$/i.test(l),c=e.firstChild;if(!/pre(\-wrap)?$/i.test(l))for(;c;){if(i=c.nextSibling,t=c.nodeValue,(n=c.nodeType)===we&&c.firstChild&&ht(c),n===ke){for(n=h(c),o=h(c,!0),a=!1;rt(o,"sceditor-ignore");)o=h(o,!0);if(Be(c)&&o){for(r=o;r.lastChild;)for(r=r.lastChild;rt(r,"sceditor-ignore");)r=h(r,!0);a=r.nodeType===ke?/[\t\n\r ]$/.test(r.nodeValue):!Be(r)}t=t.replace(/\u200B/g,""),o&&Be(o)&&!a||(t=t.replace(s?/^[\t ]+/:/^[\t\n\r ]+/,"")),(t=n&&Be(n)?t:t.replace(s?/[\t ]+$/:/[\t\n\r ]+$/,"")).length?c.nodeValue=t.replace(s?/[\t ]+/g:/[\t\n\r ]+/g," "):Ee(c)}c=i}}function g(e,t){var n=e.ownerDocument.createRange();return n.setStartBefore(e),n.setEndAfter(t),n.extractContents()}function gt(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function y(e,t){var n=e.style;return c[t]||(c[t]=t.replace(/^-ms-/,"ms-").replace(/-(\w)/g,function(e,t){return t.toUpperCase()})),n=n[t=c[t]],"textAlign"===t&&(n=n||Re(e,t),Re(e.parentNode,t)===n||"block"!==Re(e,"display")||_e(e,"hr,th"))?"":n}function yt(e,t){var n=e.attributes.length;if(n===t.attributes.length){for(;n--;){var o=e.attributes[n];if("style"===o.name?!function(e,t){var n=e.style.length;if(n===t.style.length){for(;n--;){var o=e.style[n];if(e.style[o]!==t.style[o])return}return 1}}(e,t):o.value!==Me(t,o.name))return}return 1}}function vt(e){for(;e.firstChild;)Oe(e.firstChild,e);Ee(e)}var bt={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:"#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",locale:Me(document.documentElement,"lang")||"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,startInSourceMode:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,allowedIframeUrls:[],parserOptions:{},dropDownCss:{},allowedTags:[],allowedAttributes:[]},v=/^(https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i;function xt(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function He(e,t){var n;return e&&(!(n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":"&nbsp; ","\r\n":"<br />","\r":"<br />","\n":"<br />"})!==t&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e=e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})),e}var b={html:'<!DOCTYPE html><html{attrs}><head><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="image">{url}</label> <input type="text" id="image" dir="ltr" placeholder="https://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" dir="ltr" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" dir="ltr" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" dir="ltr" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" frameborder="0" allowfullscreen src="https://www.youtube-nocookie.com/embed/{id}?wmode=opaque&start={time}" data-youtube-id="{id}"></iframe>'};function ze(e,t,n){var o=b[e];return Object.keys(t).forEach(function(e){o=o.replace(new RegExp(xt("{"+e+"}"),"g"),t[e])}),o=n?ut(o):o}function x(e){if("mozHidden"in document)for(var t,n=e.getBody();n;){if((t=n).firstChild)t=t.firstChild;else{for(;t&&!t.nextSibling;)t=t.parentNode;t=t&&t.nextSibling}3===n.nodeType&&/[\n\r\t]+/.test(n.nodeValue)&&!/^pre/.test(Re(n.parentNode,"whiteSpace"))&&Ee(n),n=t}}var Pe={bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{state:function(e){var t;if(e=e&&3===e.nodeType?e.parentNode:e)return t="ltr"===Re(e,"direction"),e=Re(e,"textAlign"),/left/.test(e)||e===(t?"start":"end")},exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{state:function(e){var t;if(e=e&&3===e.nodeType?e.parentNode:e)return t="ltr"===Re(e,"direction"),e=Re(e,"textAlign"),/right/.test(e)||e===(t?"end":"start")},exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(t,e,n){var o=Te("div");De(o,"click","a",function(e){n(ot(this,"font")),t.closeDropDown(!0),e.preventDefault()}),t.opts.fonts.split(",").forEach(function(e){Se(o,ze("fontOpt",{font:e},!0))}),t.createDropDown(e,"font-picker",o)},exec:function(e){var t=this;Pe.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(t,e,n){var o=Te("div");De(o,"click","a",function(e){n(ot(this,"size")),t.closeDropDown(!0),e.preventDefault()});for(var r=1;r<=7;r++)Se(o,ze("sizeOpt",{size:r},!0));t.createDropDown(e,"fontsize-picker",o)},exec:function(e){var t=this;Pe.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(t,e,n){var o=Te("div"),r="",i=Pe.color;i._htmlCache||(t.opts.colors.split("|").forEach(function(e){r+='<div class="sceditor-color-column">',e.split(",").forEach(function(e){r+='<a href="#" class="sceditor-color-option" style="background-color: '+e+'" data-color="'+e+'"></a>'}),r+="</div>"}),i._htmlCache=r),Se(o,ut(i._htmlCache)),De(o,"click","a",function(e){n(ot(this,"color")),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"color-picker",o)},exec:function(e){var t=this;Pe.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=Te("div"),o=this;Se(n,ze("pastetext",{label:o._("Paste your text inside the following box:"),insert:o._("Insert")},!0)),De(n,"click",".button",function(e){(t=Ne(n,"#txt")[0].value)&&o.wysiwygEditorInsertText(t),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:function(){x(this),this.execCommand("insertunorderedlist")},tooltip:"Bullet list"},orderedlist:{exec:function(){x(this),this.execCommand("insertorderedlist")},tooltip:"Numbered list"},indent:{state:function(e,t){var n;return _e(t,"li")||_e(t,"ul,ol,menu")&&(n=(t=this.getRangeHelper().selectedRange()).startContainer.parentNode,t=t.endContainer.parentNode,n!==n.parentNode.firstElementChild||_e(t,"li")&&t!==t.parentNode.lastElementChild)?0:-1},exec:function(){var e=this.getRangeHelper().getFirstBlockParent();this.focus(),Ce(e,"ul,ol,menu")&&this.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(e,t){return Ce(t,"ul,ol,menu")?0:-1},exec:function(){Ce(this.getRangeHelper().getFirstBlockParent(),"ul,ol,menu")&&this.execCommand("outdent")},tooltip:"Remove one indent"},table:{exec:function(e){var r=this,i=Te("div");Se(i,ze("table",{rows:r._("Rows:"),cols:r._("Cols:"),insert:r._("Insert")},!0)),De(i,"click",".button",function(e){var t=Number(Ne(i,"#rows")[0].value),n=Number(Ne(i,"#cols")[0].value),o="<table>";0<t&&0<n&&(o+=Array(t+1).join("<tr>"+Array(n+1).join("<td><br /></td>")+"</tr>"),r.wysiwygEditorInsertHtml(o+="</table>"),r.closeDropDown(!0),e.preventDefault())}),r.createDropDown(e,"inserttable",i)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{_dropDown:function(t,e,n,o){var r=Te("div"),i=(Se(r,ze("image",{url:t._("URL:"),width:t._("Width (optional):"),height:t._("Height (optional):"),insert:t._("Insert")},!0)),Ne(r,"#image")[0]);i.value=n,De(r,"click",".button",function(e){i.value&&o(i.value,Ne(r,"#width")[0].value,Ne(r,"#height")[0].value),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertimage",r)},exec:function(e){var r=this;Pe.image._dropDown(r,e,"",function(e,t,n){var o="";t&&(o+=' width="'+parseInt(t,10)+'"'),n&&(o+=' height="'+parseInt(n,10)+'"'),o+=' src="'+He(e)+'"',r.wysiwygEditorInsertHtml("<img"+o+" />")})},tooltip:"Insert an image"},email:{_dropDown:function(n,e,o){var r=Te("div");Se(r,ze("email",{label:n._("E-mail:"),desc:n._("Description (optional):"),insert:n._("Insert")},!0)),De(r,"click",".button",function(e){var t=Ne(r,"#email")[0].value;t&&o(t,Ne(r,"#des")[0].value),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"insertemail",r)},exec:function(e){var n=this;Pe.email._dropDown(n,e,function(e,t){!n.getRangeHelper().selectedHtml()||t?n.wysiwygEditorInsertHtml('<a href="mailto:'+He(e)+'">'+He(t||e)+"</a>"):n.execCommand("createlink","mailto:"+e)})},tooltip:"Insert an email"},link:{_dropDown:function(t,e,n){var o=Te("div"),r=(Se(o,ze("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0)),Ne(o,"#link")[0]);function i(e){r.value&&n(r.value,Ne(o,"#des")[0].value),t.closeDropDown(!0),e.preventDefault()}De(o,"click",".button",i),De(o,"keypress",function(e){13===e.which&&r.value&&i(e)},!0),t.createDropDown(e,"insertlink",o)},exec:function(e){var n=this;Pe.link._dropDown(n,e,function(e,t){t||!n.getRangeHelper().selectedHtml()?n.wysiwygEditorInsertHtml('<a href="'+He(e)+'">'+He(t||e)+"</a>"):n.execCommand("createlink",e)})},tooltip:"Insert a link"},unlink:{state:function(){return Ce(this.currentNode(),"a")?0:-1},exec:function(){var e=Ce(this.currentNode(),"a");if(e){for(;e.firstChild;)Oe(e.firstChild,e);Ee(e)}},tooltip:"Unlink"},quote:{exec:function(e,t,n){var o="<blockquote>",r="</blockquote>";t?(o=o+(n=n?"<cite>"+He(n)+"</cite>":"")+t+r,r=null):""===this.getRangeHelper().selectedHtml()&&(r="<br />"+r),this.wysiwygEditorInsertHtml(o,r)},tooltip:"Insert a Quote"},emoticon:{exec:function(d){var f=this;f.createDropDown(d,"emoticons",function t(e){var n,o=f.opts,r=o.emoticonsRoot||"",i=o.emoticonsCompat,a=f.getRangeHelper(),l=i&&" "!==a.getOuterText(!0,1)?" ":"",s=i&&" "!==a.getOuterText(!1,1)?" ":"",c=Te("div"),u=Te("div"),i=be({},o.emoticons.dropdown,e?o.emoticons.more:{});return Se(c,u),n=Math.sqrt(Object.keys(i).length),De(c,"click","img",function(e){f.insert(l+Me(this,"alt")+s,null,!1).closeDropDown(!0),e.preventDefault()}),xe(i,function(e,t){Se(u,Te("img",{src:r+(t.url||t),alt:e,title:t.tooltip||e})),u.children.length>=n&&(u=Te("div"),Se(c,u))}),!e&&o.emoticons.more&&(Se(a=Te("a",{className:"sceditor-more"}),document.createTextNode(f._("More"))),De(a,"click",function(e){f.createDropDown(d,"more-emoticons",t(!0)),e.preventDefault()}),Se(c,a)),c}(!1))},txtExec:function(e){Pe.emoticon.exec.call(this,e)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(r,e,i){var a=Te("div");Se(a,ze("youtubeMenu",{label:r._("Video URL:"),insert:r._("Insert")},!0)),De(a,"click",".button",function(e){var t=(n=Ne(a,"#link")[0].value).match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/),n=n.match(/[&|?](?:star)?t=((\d+[hms]?){1,3})/),o=0;n&&xe(n[1].split(/[hms]/),function(e,t){""!==t&&(o=60*o+Number(t))}),t&&/^[a-zA-Z0-9_\-]{11}$/.test(t[1])&&i(t[1],o),r.closeDropDown(!0),e.preventDefault()}),r.createDropDown(e,"insertlink",a)},exec:function(e){var n=this;Pe.youtube._dropDown(n,e,function(e,t){n.wysiwygEditorInsertHtml(ze("youtube",{id:e,time:t}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1;return o<10&&(o="0"+o),(t=t.getDate())<10&&(t="0"+t),e.opts.dateFormat.replace(/year/i,n=n<2e3?1900+n:n).replace(/month/i,o).replace(/day/i,t)},exec:function(){this.insertText(Pe.date._date(this))},txtExec:function(){this.insertText(Pe.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes();return(t=t<10?"0"+t:t)+":"+(n=n<10?"0"+n:n)+":"+((e=e.getSeconds())<10?"0"+e:e)},exec:function(){this.insertText(Pe.time._time())},txtExec:function(){this.insertText(Pe.time._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!_e(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!_e(t,"body")))&&(e="ltr"===Re(t,"direction")?"":"ltr",Re(t,"direction",e))},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!_e(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!_e(t,"body")))&&(e="rtl"===Re(t,"direction")?"":"rtl",Re(t,"direction",e))},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize()),this.focus()},txtExec:function(){this.maximize(!this.maximize()),this.focus()},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode(),this.focus()},txtExec:function(){this.toggleSourceMode(),this.focus()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},ignore:{}},w={};function wt(i){function a(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)}function e(e,t){for(var n,o=a((e=[].slice.call(e)).shift()),r=0;r<l.length;r++)if(o in l[r]&&(n=l[r][o].apply(i,e),t))return n}var r=this,l=[];r.call=function(){e(arguments,!1)},r.callOnlyFirst=function(){return e(arguments,!0)},r.hasHandler=function(e){var t=l.length;for(e=a(e);t--;)if(e in l[t])return!0;return!1},r.exists=function(e){return e in w&&"function"==typeof(e=w[e])&&"object"==typeof e.prototype},r.isRegistered=function(e){if(r.exists(e))for(var t=l.length;t--;)if(l[t]instanceof w[e])return!0;return!1},r.register=function(e){return!(!r.exists(e)||r.isRegistered(e)||(e=new w[e],l.push(e),"init"in e&&e.init.call(i),0))},r.deregister=function(e){var t,n=l.length,o=!1;if(r.isRegistered(e))for(;n--;)l[n]instanceof w[e]&&(o=!0,"destroy"in(t=l.splice(n,1)[0])&&t.destroy.call(i));return o},r.destroy=function(){for(var e=l.length;e--;)"destroy"in l[e]&&l[e].destroy.call(i);l=[],i=null}}wt.plugins=w;var k=function(e,t,n){var o,r,i,a,l,s="",c=e.startContainer,u=e.startOffset;for(c&&3!==c.nodeType&&(c=c.childNodes[u],u=0),i=a=u;n>s.length&&c&&3===c.nodeType;)o=c.nodeValue,r=n-s.length,l&&(a=o.length,i=0),l=c,c=t?(u=i=Math.max(a-r,0),s=o.substr(i,a-i)+s,l.previousSibling):(u=i+(a=Math.min(r,o.length)),s+=o.substr(i,a),l.nextSibling);return{node:l||c,offset:u,text:s}};function kt(r,e,i){var a,l,s=e||r.contentDocument||r.document,c="sceditor-start-marker",u="sceditor-end-marker",g=this;g.insertHTML=function(e,t){var n,o;if(!g.selectedRange())return!1;for(t&&(e+=g.selectedHtml()+t),o=Te("p",{},s),n=s.createDocumentFragment(),o.innerHTML=i(e);o.firstChild;)Se(n,o.firstChild);g.insertNode(n)},l=function(e,t,n){var o,r=s.createDocumentFragment();if("string"==typeof e?(t&&(e+=g.selectedHtml()+t),r=ut(e)):(Se(r,e),t&&(Se(r,g.selectedRange().extractContents()),Se(r,t))),o=r.lastChild){for(;!Be(o.lastChild,!0);)o=o.lastChild;return pt(o)?o.lastChild||Se(o,document.createTextNode("​")):o=r,g.removeMarkers(),Se(o,a(c)),Se(o,a(u)),n?(Se(e=Te("div"),r),e.innerHTML):r}},g.insertNode=function(e,t){var n,o,e=l(e,t),r=(t=g.selectedRange()).commonAncestorContainer,i=[];if(!e)return!1;function a(e){e&&m(e)&&i.indexOf(e)<0&&Ee(e)}t.startContainer!==t.endContainer&&(xe(r.childNodes,function(e,t){m(t)&&i.push(t)}),n=e.firstChild,o=e.lastChild),t.deleteContents(),r&&3!==r.nodeType&&!pt(r)?Oe(e,r):(t.insertNode(e),a(n&&n.previousSibling),a(o&&o.nextSibling)),g.restoreRange()},g.cloneSelected=function(){var e=g.selectedRange();if(e)return e.cloneRange()},g.selectedRange=function(){var e,t,n=r.getSelection();if(n){if(n.rangeCount<=0){for(t=s.body;t.firstChild;)t=t.firstChild;(e=s.createRange()).setStartBefore(t),n.addRange(e)}return 0<n.rangeCount?n.getRangeAt(0):e}},g.hasSelection=function(){var e=r.getSelection();return e&&0<e.rangeCount},g.selectedHtml=function(){var e,t=g.selectedRange();return t?(Se(e=Te("p",{},s),t.cloneContents()),e.innerHTML):""},g.parentNode=function(){var e=g.selectedRange();if(e)return e.commonAncestorContainer},g.getFirstBlockParent=function(e){var t=function(e){return Be(e,!0)?(e=e?e.parentNode:null)&&t(e):e};return t(e||g.parentNode())},g.insertNodeAt=function(e,t){var n=g.selectedRange(),o=g.cloneSelected();if(!o)return!1;o.collapse(e),o.insertNode(t),g.selectRange(n)},a=function(e){return g.removeMarker(e),(e=Te("span",{id:e,className:"sceditor-selection sceditor-ignore",style:"display:none;line-height:0"},s)).innerHTML=" ",e},g.insertMarkers=function(){var e=g.selectedRange(),t=a(c);g.removeMarkers(),g.insertNodeAt(!0,t),e&&e.collapsed?t.parentNode.insertBefore(a(u),t.nextSibling):g.insertNodeAt(!1,a(u))},g.getMarker=function(e){return s.getElementById(e)},g.removeMarker=function(e){(e=g.getMarker(e))&&Ee(e)},g.removeMarkers=function(){g.removeMarker(c),g.removeMarker(u)},g.saveRange=function(){g.insertMarkers()},g.selectRange=function(e){var t,n=r.getSelection(),o=e.endContainer;if(e.collapsed&&o&&!Be(o,!0)){for(t=o.lastChild;t&&_e(t,".sceditor-ignore");)t=t.previousSibling;_e(t,"br")&&((o=s.createRange()).setEndAfter(t),o.collapse(!1),g.compare(e,o)&&(e.setStartBefore(t),e.collapse(!0)))}n&&(g.clear(),n.addRange(e))},g.restoreRange=function(){var e,t=g.selectedRange(),n=g.getMarker(c),o=g.getMarker(u);if(!n||!o||!t)return!1;e=n.nextSibling===o,(t=s.createRange()).setStartBefore(n),t.setEndAfter(o),e&&t.collapse(!0),g.selectRange(t),g.removeMarkers()},g.selectOuterText=function(e,t){var n=g.cloneSelected();if(!n)return!1;n.collapse(!1),e=k(n,!0,e),t=k(n,!1,t),n.setStart(e.node,e.offset),n.setEnd(t.node,t.offset),g.selectRange(n)},g.getOuterText=function(e,t){var n=g.cloneSelected();return n?(n.collapse(!e),k(n,e,t).text):""},g.replaceKeyword=function(e,t,n,o,r,i){n||e.sort(function(e,t){return e[0].length-t[0].length});var a,l,s,c,u,d,f,p="(^|[\\s    ])",m=e.length,h=r?1:0,n=o||e[m-1][0].length;for(r&&n++,i=i||"",c=(a=g.getOuterText(!0,n)).length,a+=i,t&&(a+=g.getOuterText(!1,n));m--;)if(f=(d=e[m][0]).length,s=Math.max(0,c-f-h),l=-1,r?(u=a.substr(s).match(new RegExp(p+xt(d)+p)))&&(l=u.index+s+u[1].length):l=a.indexOf(d,s),-1<l&&l<=c&&c<=l+f+h)return g.selectOuterText(u=c-l,f-u-(/^\S/.test(i)?1:0)),g.insertHTML(e[m][1]),!0;return!1},g.compare=function(e,t){return t=t||g.selectedRange(),e&&t?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):!e&&!t},g.clear=function(){var e=r.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())}}var T,C,e,t=navigator.userAgent,Tt=/iPhone|iPod|iPad| wosbrowser\//i.test(t),Ct=(T=!!window.document.documentMode,C="-ms-ime-align"in document.documentElement.style,(e=document.createElement("div")).contentEditable=!0,"contentEditable"in document.documentElement&&"true"===e.contentEditable&&(e=/Opera Mobi|Opera Mini/i.test(t),/Android/i.test(t)&&(e=!0,/Safari/.test(t)&&(e=!(n=/Safari\/(\d+)/.exec(t))||!n[1]||n[1]<534)),/ Silk\//i.test(t)&&(e=!(n=/AppleWebKit\/(\d+)/.exec(t))||!n[1]||n[1]<534),Tt&&(e=/OS [0-4](_\d)+ like Mac/i.test(t)),/Firefox/i.test(t)&&(e=!1),/OneBrowser/i.test(t)&&(e=!1),"UCWEB"===navigator.vendor&&(e=!1),!(e=T||C||e)));function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return(S=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){}}}()?Reflect.construct:function(e,t,n){var o=[null];return o.push.apply(o,t),t=new(Function.bind.apply(e,o)),n&&E(t,n.prototype),t}).apply(null,arguments)}function je(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){var t;if(e)return"string"==typeof e?N(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(e,void 0):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function St(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return F(D,t)}var D,A=Object.hasOwnProperty,M=Object.setPrototypeOf,R=Object.isFrozen,_=Object.getPrototypeOf,O=Object.getOwnPropertyDescriptor,Ue=Object.freeze,n=Object.seal,I=Object.create,L=(t="undefined"!=typeof Reflect&&Reflect).apply||function(e,t,n){return e.apply(t,n)},Ue=Ue||function(e){return e},n=n||function(e){return e},F=t.construct||function(e,t){return S(e,je(t))},Nt=o(Array.prototype.forEach),Dt=o(Array.prototype.pop),At=o(Array.prototype.push),Mt=o(String.prototype.toLowerCase),Rt=o(String.prototype.toString),_t=o(String.prototype.match),We=o(String.prototype.replace),Ot=o(String.prototype.indexOf),It=o(String.prototype.trim),qe=o(RegExp.prototype.test);D=TypeError;function o(r){return function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return L(r,e,n)}}function Ve(e,t,n){n=n||Mt,M&&M(e,null);for(var o=t.length;o--;){var r,i=t[o];"string"==typeof i&&(r=n(i))!==i&&(R(t)||(t[o]=r),i=r),e[i]=!0}return e}function Lt(e){var t,n=I(null);for(t in e)!0===L(A,e,[t])&&(n[t]=e[t]);return n}function Ft(e,t){for(;null!==e;){var n=O(e,t);if(n){if(n.get)return o(n.get);if("function"==typeof n.value)return o(n.value)}e=_(e)}return function(e){return console.warn("fallback value for",e),null}}var Bt=Ue(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ht=Ue(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),zt=Ue(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Pt=Ue(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),jt=Ue(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Ut=Ue(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Wt=Ue(["#text"]),qt=Ue(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Vt=Ue(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Gt=Ue(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$t=Ue(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Yt=n(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Kt=n(/<%[\w\W]*|[\w\W]*%>/gm),Xt=n(/\${[\w\W]*}/gm),Qt=n(/^data-[\-\w.\u00B7-\uFFFF]/),Zt=n(/^aria-[\-\w]+$/),Jt=n(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),en=n(/^(?:\w+script|data):/i),tn=n(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nn=n(/^html$/i),on=function F(e){var l=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window,c=function(e){return F(e)};if(c.version="2.4.3",c.removed=[],l&&l.document&&9===l.document.nodeType){var s=l.document,r=l.document,B=l.DocumentFragment,e=l.HTMLTemplateElement,u=l.Node,H=l.Element,t=l.NodeFilter,z=void 0===(n=l.NamedNodeMap)?l.NamedNodeMap||l.MozNamedAttrMap:n,P=l.HTMLFormElement,j=l.DOMParser,d=l.trustedTypes,U=Ft(n=H.prototype,"cloneNode"),W=Ft(n,"nextSibling"),q=Ft(n,"childNodes"),f=Ft(n,"parentNode"),p=("function"==typeof e&&(n=r.createElement("template")).content&&n.content.ownerDocument&&(r=n.content.ownerDocument),function(e,t){if("object"!==Et(e)||"function"!=typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix",t="dompurify"+((n=t.currentScript&&t.currentScript.hasAttribute(o)?t.currentScript.getAttribute(o):n)?"#"+n:"");try{return e.createPolicy(t,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}}(d,s)),m=p?p.createHTML(""):"",e=r,V=e.implementation,G=e.createNodeIterator,$=e.createDocumentFragment,Y=e.getElementsByTagName,K=s.importNode,n={};try{n=Lt(r).documentMode?r.documentMode:{}}catch(e){}var X,h,g,o={},Q=(c.isSupported="function"==typeof f&&V&&void 0!==V.createHTMLDocument&&9!==n,Yt),Z=Kt,J=Xt,ee=Qt,te=Zt,ne=en,oe=tn,re=Jt,y=null,ie=Ve({},[].concat(je(Bt),je(Ht),je(zt),je(jt),je(Wt))),v=null,ae=Ve({},[].concat(je(qt),je(Vt),je(Gt),je($t))),b=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),x=null,le=null,se=!0,ce=!0,ue=!1,w=!1,k=!1,de=!1,fe=!1,T=!1,C=!1,E=!1,pe=!0,me=!1,he="user-content-",ge=!0,S=!1,i={},N=null,ye=Ve({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ve=null,be=Ve({},["audio","video","img","source","image","track"]),xe=null,we=Ve({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),D="http://www.w3.org/1998/Math/MathML",A="http://www.w3.org/2000/svg",M="http://www.w3.org/1999/xhtml",R=M,ke=null,Te=Ve({},[D,A,M],Rt),Ce=["application/xhtml+xml","text/html"],a=null,Ee=r.createElement("form"),Se=function(e){return e instanceof RegExp||e instanceof Function},Ne=function(e){a&&a===e||(e=Lt(e=e&&"object"===Et(e)?e:{}),h=-1===Ce.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,g="application/xhtml+xml"===h?Rt:Mt,y="ALLOWED_TAGS"in e?Ve({},e.ALLOWED_TAGS,g):ie,v="ALLOWED_ATTR"in e?Ve({},e.ALLOWED_ATTR,g):ae,ke="ALLOWED_NAMESPACES"in e?Ve({},e.ALLOWED_NAMESPACES,Rt):Te,xe="ADD_URI_SAFE_ATTR"in e?Ve(Lt(we),e.ADD_URI_SAFE_ATTR,g):we,ve="ADD_DATA_URI_TAGS"in e?Ve(Lt(be),e.ADD_DATA_URI_TAGS,g):be,N="FORBID_CONTENTS"in e?Ve({},e.FORBID_CONTENTS,g):ye,x="FORBID_TAGS"in e?Ve({},e.FORBID_TAGS,g):{},le="FORBID_ATTR"in e?Ve({},e.FORBID_ATTR,g):{},i="USE_PROFILES"in e&&e.USE_PROFILES,se=!1!==e.ALLOW_ARIA_ATTR,ce=!1!==e.ALLOW_DATA_ATTR,ue=e.ALLOW_UNKNOWN_PROTOCOLS||!1,w=e.SAFE_FOR_TEMPLATES||!1,k=e.WHOLE_DOCUMENT||!1,T=e.RETURN_DOM||!1,C=e.RETURN_DOM_FRAGMENT||!1,E=e.RETURN_TRUSTED_TYPE||!1,fe=e.FORCE_BODY||!1,pe=!1!==e.SANITIZE_DOM,me=e.SANITIZE_NAMED_PROPS||!1,ge=!1!==e.KEEP_CONTENT,S=e.IN_PLACE||!1,re=e.ALLOWED_URI_REGEXP||re,R=e.NAMESPACE||M,e.CUSTOM_ELEMENT_HANDLING&&Se(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(b.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Se(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(b.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(b.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),w&&(ce=!1),C&&(T=!0),i&&(y=Ve({},je(Wt)),v=[],!0===i.html&&(Ve(y,Bt),Ve(v,qt)),!0===i.svg&&(Ve(y,Ht),Ve(v,Vt),Ve(v,$t)),!0===i.svgFilters&&(Ve(y,zt),Ve(v,Vt),Ve(v,$t)),!0===i.mathMl&&(Ve(y,jt),Ve(v,Gt),Ve(v,$t))),e.ADD_TAGS&&Ve(y=y===ie?Lt(y):y,e.ADD_TAGS,g),e.ADD_ATTR&&Ve(v=v===ae?Lt(v):v,e.ADD_ATTR,g),e.ADD_URI_SAFE_ATTR&&Ve(xe,e.ADD_URI_SAFE_ATTR,g),e.FORBID_CONTENTS&&Ve(N=N===ye?Lt(N):N,e.FORBID_CONTENTS,g),ge&&(y["#text"]=!0),k&&Ve(y,["html","head","body"]),y.table&&(Ve(y,["tbody"]),delete x.tbody),Ue&&Ue(e),a=e)},De=Ve({},["mi","mo","mn","ms","mtext"]),Ae=Ve({},["foreignobject","desc","title","annotation-xml"]),Me=Ve({},["title","style","font","a","script"]),_=Ve({},Ht),Re=(Ve(_,zt),Ve(_,Pt),Ve({},jt)),O=(Ve(Re,Ut),function(t){At(c.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=m}catch(e){t.remove()}}}),_e=function(e,t){try{At(c.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){At(c.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!v[e])if(T||C)try{O(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Oe=function(e){fe?e="<remove></remove>"+e:n=(n=_t(e,/^[\r\n\t ]+/))&&n[0],"application/xhtml+xml"===h&&R===M&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var t,n,o=p?p.createHTML(e):e;if(R===M)try{t=(new j).parseFromString(o,h)}catch(e){}if(!t||!t.documentElement){t=V.createDocument(R,"template",null);try{t.documentElement.innerHTML=X?m:o}catch(e){}}return o=t.body||t.documentElement,e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),R===M?Y.call(t,k?"html":"body")[0]:k?t.documentElement:o},Ie=function(e){return G.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT,null,!1)},I=function(e){return"object"===Et(u)?e instanceof u:e&&"object"===Et(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},L=function(e,t,n){o[e]&&Nt(o[e],function(e){e.call(c,t,n,a)})},Le=function(e){if(L("beforeSanitizeElements",e,null),(!((i=e)instanceof P)||"string"==typeof i.nodeName&&"string"==typeof i.textContent&&"function"==typeof i.removeChild&&i.attributes instanceof z&&"function"==typeof i.removeAttribute&&"function"==typeof i.setAttribute&&"string"==typeof i.namespaceURI&&"function"==typeof i.insertBefore&&"function"==typeof i.hasChildNodes)&&!qe(/[\u0080-\uFFFF]/,e.nodeName)){var t,n,o,r,i=g(e.nodeName);if(L("uponSanitizeElement",e,{tagName:i,allowedTags:y}),(!e.hasChildNodes()||I(e.firstElementChild)||I(e.content)&&I(e.content.firstElementChild)||!qe(/<[/\w]/g,e.innerHTML)||!qe(/<[/\w]/g,e.textContent))&&("select"!==i||!qe(/<template/i,e.innerHTML))){if(y[i]&&!x[i])return e instanceof H&&((n=f(t=e))&&n.tagName||(n={namespaceURI:R,tagName:"template"}),o=Mt(t.tagName),r=Mt(n.tagName),!ke[t.namespaceURI]||(t.namespaceURI===A?n.namespaceURI===M?"svg"!==o:n.namespaceURI===D?"svg"!==o||"annotation-xml"!==r&&!De[r]:!Boolean(_[o]):t.namespaceURI===D?n.namespaceURI===M?"math"!==o:n.namespaceURI===A?"math"!==o||!Ae[r]:!Boolean(Re[o]):t.namespaceURI===M?n.namespaceURI===A&&!Ae[r]||n.namespaceURI===D&&!De[r]||Re[o]||!Me[o]&&_[o]:"application/xhtml+xml"!==h||!ke[t.namespaceURI]))||("noscript"===i||"noembed"===i)&&qe(/<\/no(script|embed)/i,e.innerHTML)?(O(e),!0):(w&&3===e.nodeType&&(n=e.textContent,n=We(n,Q," "),n=We(n,Z," "),n=We(n,J," "),e.textContent!==n&&(At(c.removed,{element:e.cloneNode()}),e.textContent=n)),L("afterSanitizeElements",e,null),!1);if(!x[i]&&Be(i)){if(b.tagNameCheck instanceof RegExp&&qe(b.tagNameCheck,i))return!1;if(b.tagNameCheck instanceof Function&&b.tagNameCheck(i))return!1}if(ge&&!N[i]){var a=f(e)||e.parentNode,l=q(e)||e.childNodes;if(l&&a)for(var s=l.length-1;0<=s;--s)a.insertBefore(U(l[s],!0),W(e))}}}return O(e),!0},Fe=function(e,t,n){if(pe&&("id"===t||"name"===t)&&(n in r||n in Ee))return!1;if((!ce||le[t]||!qe(ee,t))&&(!se||!qe(te,t)))if(!v[t]||le[t]){if(!(Be(e)&&(b.tagNameCheck instanceof RegExp&&qe(b.tagNameCheck,e)||b.tagNameCheck instanceof Function&&b.tagNameCheck(e))&&(b.attributeNameCheck instanceof RegExp&&qe(b.attributeNameCheck,t)||b.attributeNameCheck instanceof Function&&b.attributeNameCheck(t))||"is"===t&&b.allowCustomizedBuiltInElements&&(b.tagNameCheck instanceof RegExp&&qe(b.tagNameCheck,n)||b.tagNameCheck instanceof Function&&b.tagNameCheck(n))))return!1}else if(!xe[t]&&!qe(re,We(n,oe,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Ot(n,"data:")||!ve[e])&&(!ue||qe(ne,We(n,oe,"")))&&n)return!1;return!0},Be=function(e){return 0<e.indexOf("-")},He=function(e){L("beforeSanitizeAttributes",e,null);var t=e.attributes;if(t){for(var n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:v},o=t.length;o--;){var r=(l=t[o]).name,i=l.namespaceURI,a="value"===r?l.value:It(l.value),l=g(r);if(n.attrName=l,n.attrValue=a,n.keepAttr=!0,n.forceKeepAttr=void 0,L("uponSanitizeAttribute",e,n),a=n.attrValue,!n.forceKeepAttr&&(_e(r,e),n.keepAttr))if(qe(/\/>/i,a))_e(r,e);else{w&&(a=We(a,Q," "),a=We(a,Z," "),a=We(a,J," "));var s=g(e.nodeName);if(Fe(s,l,a)){if(!me||"id"!==l&&"name"!==l||(_e(r,e),a=he+a),p&&"object"===Et(d)&&"function"==typeof d.getAttributeType&&!i)switch(d.getAttributeType(s,l)){case"TrustedHTML":a=p.createHTML(a);break;case"TrustedScriptURL":a=p.createScriptURL(a)}try{i?e.setAttributeNS(i,r,a):e.setAttribute(r,a),Dt(c.removed)}catch(e){}}}}L("afterSanitizeAttributes",e,null)}},ze=function e(t){var n,o=Ie(t);for(L("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)L("uponSanitizeShadowNode",n,null),Le(n)||(n.content instanceof B&&e(n.content),He(n));L("afterSanitizeShadowDOM",t,null)};c.sanitize=function(e){var t,n,o,r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof(e=(X=!e)?"\x3c!--\x3e":e)&&!I(e)){if("function"!=typeof e.toString)throw St("toString is not a function");if("string"!=typeof(e=e.toString()))throw St("dirty is not a string, aborting")}if(!c.isSupported){if("object"===Et(l.toStaticHTML)||"function"==typeof l.toStaticHTML){if("string"==typeof e)return l.toStaticHTML(e);if(I(e))return l.toStaticHTML(e.outerHTML)}return e}if(de||Ne(i),c.removed=[],S="string"!=typeof e&&S){if(e.nodeName&&(i=g(e.nodeName),!y[i]||x[i]))throw St("root node is forbidden and cannot be sanitized in-place")}else if(e instanceof u)1===(i=(t=Oe("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?t=i:t.appendChild(i);else{if(!T&&!w&&!k&&-1===e.indexOf("<"))return p&&E?p.createHTML(e):e;if(!(t=Oe(e)))return T?null:E?m:""}t&&fe&&O(t.firstChild);for(var a=Ie(S?e:t);n=a.nextNode();)3===n.nodeType&&n===o||Le(n)||(n.content instanceof B&&ze(n.content),He(n),o=n);if(o=null,S)return e;if(T){if(C)for(r=$.call(t.ownerDocument);t.firstChild;)r.appendChild(t.firstChild);else r=t;return v.shadowroot?K.call(s,r,!0):r}return i=k?t.outerHTML:t.innerHTML,k&&y["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&qe(nn,t.ownerDocument.doctype.name)&&(i="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+i),w&&(i=We(i,Q," "),i=We(i,Z," "),i=We(i,J," ")),p&&E?p.createHTML(i):i},c.setConfig=function(e){Ne(e),de=!0},c.clearConfig=function(){a=null,de=!1},c.isValidAttribute=function(e,t,n){return a||Ne({}),e=g(e),t=g(t),Fe(e,t,n)},c.addHook=function(e,t){"function"==typeof t&&(o[e]=o[e]||[],At(o[e],t))},c.removeHook=function(e){if(o[e])return Dt(o[e])},c.removeHooks=function(e){o[e]&&(o[e]=[])},c.removeAllHooks=function(){o={}}}else c.isSupported=!1;return c}(),Ge=window,$e=document,rn=/^image\/(p?jpe?g|gif|png|bmp)$/i;function an(e,t){var n;f(e,function(e){Be(e,!0)?(n||e.nodeType===ke?/\S/.test(e.nodeValue):!_e(e,".sceditor-ignore"))&&(n||Oe(n=Te("p",{},t),e),Se(n,e)):n=null},!1,!0)}function Ye(r,e){var a,x,u,i,o,f,d,l,s,c,p,t,m,h,g,y,v,F,B,n,b,H,z,w,k,P,j,U,W,q,V,G,$,Y,K,X,Q,Z,J,ee,T,te,ne,oe,re,ie,C,ae,E,le,se,ce,ue,de,fe,S,pe,N,me,D,A=this,M={},he=[],R=[],_={},ge={},O={},I=(A.commands=be(!0,{},e.commands||Pe),A.opts=be(!0,{},bt,e)),ye=(A.opts.emoticons=e.emoticons||bt.emoticons,Array.isArray(I.allowedIframeUrls)||(I.allowedIframeUrls=[]),I.allowedIframeUrls.push("https://www.youtube-nocookie.com/embed/"),on());function L(e){var t=["iframe"].concat(I.allowedTags),n=["allowfullscreen","frameborder","target"].concat(I.allowedAttributes);return ye.sanitize(e,{ADD_TAGS:t,ADD_ATTR:n})}ye.addHook("uponSanitizeElement",function(e,t){var n=I.allowedIframeUrls;if("iframe"===t.tagName){for(var o=Me(e,"src")||"",r=0;r<n.length;r++){var i=n[r];if(ve(i)&&o.substr(0,i.length)===i)return;if(i.test&&i.test(o))return}Ee(e)}}),ye.addHook("afterSanitizeAttributes",function(e){"target"in e&&Me(e,"data-sce-target",Me(e,"target")),Je(e,"target")}),e=function(){function e(){Ae(Ge,"load",e),I.autofocus&&ce(!!I.autofocusEnd),D(),E(),h.call("ready"),"onReady"in a&&a.onReady.call(A)}r._sceditor=A,I.locale&&"en"!==I.locale&&W(),Oe(x=Te("div",{className:"sceditor-container"}),r),Re(x,"z-index",I.zIndex),B=r.required,r.required=!1;var t=Ye.formats[I.format];a=t?new t:{},h=new wt(A),(I.plugins||"").split(",").forEach(function(e){h.register(e.trim())}),"init"in a&&a.init.call(A),Y(),q(),U(),V(),G(),Ct||A.toggleSourceMode(),C(),De(Ge,"load",e),"complete"===$e.readyState&&e()},W=function(){var e;(t=Ye.locale[I.locale])||(e=I.locale.split("-"),t=Ye.locale[e[0]]),t&&t.dateFormat&&(I.dateFormat=t.dateFormat)},U=function(){l=Te("textarea"),i=Te("iframe",{frameborder:0,allowfullscreen:!0}),I.startInSourceMode?(Ie(x,"sourceMode"),et(i)):(Ie(x,"wysiwygMode"),et(l)),I.spellcheck||Me(x,"spellcheck","false"),"https:"===Ge.location.protocol&&Me(i,"src","about:blank"),Se(x,i),Se(x,l),A.dimensions(I.width||at(r),I.height||Fe(r));var e=Tt?" ios":"",e=((d=i.contentDocument).open(),d.write(ze("html",{attrs:' class="'+e+'"',spellcheck:I.spellcheck?"":'spellcheck="false"',charset:I.charset,style:I.style})),d.close(),f=d.body,o=i.contentWindow,A.readOnly(!!I.readOnly),Tt&&(Fe(f,"100%"),De(f,"touchend",A.focus)),Me(r,"tabindex"));Me(l,"tabindex",e),Me(i,"tabindex",e),m=new kt(o,null,L),et(r),A.val(r.value),(e=I.placeholder||Me(r,"placeholder"))&&(l.placeholder=e,Me(f,"placeholder",e))},V=function(){I.autoUpdate&&(De(f,"blur",me),De(l,"blur",me)),null===I.rtl&&(I.rtl="rtl"===Re(l,"direction")),A.rtl(!!I.rtl),I.autoExpand&&(De(f,"load",D,!0),De(f,"input keyup",D)),I.resizeEnabled&&$(),Me(x,"id",I.id),A.emoticons(I.emoticonsEnabled)},G=function(){var e=r.form,t="compositionstart compositionend",n="keydown keyup keypress focus blur contextmenu input",o="onselectionchange"in d?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";De($e,"click",re),e&&(De(e,"reset",T),De(e,"submit",A.updateOriginal,!0)),De(window,"pagehide",A.updateOriginal),De(window,"pageshow",T),De(f,"keypress",ee),De(f,"keydown",Z),De(f,"keydown",J),De(f,"keyup",E),De(f,"blur",pe),De(f,"keyup",N),De(f,"paste",K),De(f,"cut copy",X),De(f,t,ne),De(f,o,le),De(f,n,oe),I.emoticonsCompat&&Ge.getSelection&&De(f,"keyup",de),De(f,"blur",function(){A.val()||Ie(f,"placeholder")}),De(f,"focus",function(){it(f,"placeholder")}),De(l,"blur",pe),De(l,"keyup",N),De(l,"keydown",Z),De(l,t,ne),De(l,n,oe),De(d,"mousedown",te),De(d,o,le),De(d,"keyup",E),De(x,"selectionchanged",se),De(x,"selectionchanged",C),De(x,"selectionchanged valuechanged nodechanged pasteraw paste",oe)},q=function(){var i,a=A.commands,l=(I.toolbarExclude||"").split(","),e=I.toolbar.split("|");u=Te("div",{className:"sceditor-toolbar",unselectable:"on"}),I.icons in Ye.icons&&(k=new Ye.icons[I.icons]),xe(e,function(e,t){i=Te("div",{className:"sceditor-group"}),xe(t.split(","),function(e,t){var n,o,r=a[t];!r||-1<l.indexOf(t)||(n=r.shortcut,o=ze("toolbarButton",{name:t,dispName:A._(r.name||r.tooltip||t)},!0).firstChild,k&&k.create&&k.create(t)&&(Oe(k.create(t),o.firstChild),Ie(o,"has-icon")),o._sceTxtMode=!!r.txtExec,o._sceWysiwygMode=!!r.exec,Le(o,"disabled",!r.exec),De(o,"click",function(e){rt(o,"disabled")||j(o,r),C(),e.preventDefault()}),De(o,"mousedown",function(e){A.closeDropDown(),e.preventDefault()}),r.tooltip&&Me(o,"title",A._(r.tooltip)+(n?" ("+n+")":"")),n&&A.addShortcut(n,t),r.state?R.push({name:t,state:r.state}):ve(r.exec)&&R.push({name:t,state:r.exec}),Se(i,o),ge[t]=o)}),i.firstChild&&Se(u,i)}),Se(I.toolbarContainer||x,u)},$=function(){function t(e){d=("touchmove"===e.type?(e=Ge.event,u=e.changedTouches[0].pageX,e.changedTouches[0]):(u=e.pageX,e)).pageY;var t=i+(d-o),n=h?r-(u-c):r+(u-c);0<b&&b<n&&(n=b),0<v&&n<v&&(n=v),I.resizeWidth||(n=!1),0<y&&y<t&&(t=y),0<g&&t<g&&(t=g),I.resizeHeight||(t=!1),(n||t)&&A.dimensions(n,t),e.preventDefault()}function n(e){m&&(m=!1,et(a),it(x,"resizing"),Ae($e,l,t),Ae($e,s,n),e.preventDefault())}var o,r,i,e=Te("div",{className:"sceditor-grip"}),a=Te("div",{className:"sceditor-resize-cover"}),l="touchmove mousemove",s="touchcancel touchend mouseup",c=0,u=0,d=0,f=at(x),p=Fe(x),m=!1,h=A.rtl(),g=I.resizeMinHeight||p/1.5,y=I.resizeMaxHeight||2.5*p,v=I.resizeMinWidth||f/1.25,b=I.resizeMaxWidth||1.25*f;k&&k.create&&(p=k.create("grip"))&&(Se(e,p),Ie(e,"has-icon")),Se(x,e),Se(x,a),et(a),De(e,"touchstart mousedown",function(e){o=("touchstart"===e.type?(e=Ge.event,c=e.touches[0].pageX,e.touches[0]):(c=e.pageX,e)).pageY,r=at(x),i=Fe(x),m=!0,Ie(x,"resizing"),tt(a),De($e,l,t),De($e,s,n),e.preventDefault()})},Y=function(){var e=I.emoticons,n=I.emoticonsRoot||"";xe(O=e?be({},e.more,e.dropdown,e.hidden):O,function(e,t){O[e]=ze("emoticon",{key:e,url:n+(t.url||t),tooltip:t.tooltip||e}),I.emoticonsEnabled&&he.push(Te("img",{src:n+(t.url||t)}))})},ce=function(e){var t,n=f.firstChild;if(st(x))if(A.sourceMode())t=e?l.value.length:0,l.setSelectionRange(t,t);else{if(ht(f),e)for((n=f.lastChild)||(n=Te("p",{},d),Se(f,n));n.lastChild;)_e(n=n.lastChild,"br")&&n.previousSibling&&(n=n.previousSibling);t=d.createRange(),pt(n)?t.selectNodeContents(n):(t.setStartBefore(n),e&&t.setStartAfter(n)),t.collapse(!e),m.selectRange(t),v=t,e&&(f.scrollTop=f.scrollHeight),A.focus()}},A.readOnly=function(e){return"boolean"!=typeof e?!l.readonly:(f.contentEditable=!e,l.readonly=!e,ie(e),A)},A.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===Me(l,"dir"):(Me(f,"dir",t),Me(l,"dir",t),it(x,"rtl"),it(x,"ltr"),Ie(x,t),k&&k.rtl&&k.rtl(e),A)},ie=function(n){var o=A.inSourceMode()?"_sceTxtMode":"_sceWysiwygMode";xe(ge,function(e,t){Le(t,"disabled",n||!t[o])})},A.width=function(e,t){return e||0===e?(A.dimensions(e,null,t),A):at(x)},A.dimensions=function(e,t,n){return t=!(!t&&0!==t)&&t,!1===(e=!(!e&&0!==e)&&e)&&!1===t?{width:A.width(),height:A.height()}:(!1!==e&&(!1!==n&&(I.width=e),at(x,e)),!1!==t&&(!1!==n&&(I.height=t),Fe(x,t)),A)},A.height=function(e,t){return e||0===e?(A.dimensions(null,e,t),A):Fe(x)},A.maximize=function(e){var t="sceditor-maximize";return Ke(e)?rt(x,t):((e=!!e)&&(z=Ge.pageYOffset),Le($e.documentElement,t,e),Le($e.body,t,e),Le(x,t,e),A.width(e?"100%":I.width,!1),A.height(e?"100%":I.height,!1),e||Ge.scrollTo(0,z),D(),A)},D=function(){I.autoExpand&&!H&&(H=setTimeout(A.expandToContent,200))},A.expandToContent=function(e){var t,n;A.maximize()||(clearTimeout(H),H=!1,b||(n=I.resizeMinHeight||I.height||Fe(r),b={min:n,max:I.resizeMaxHeight||2*n}),(n=$e.createRange()).selectNodeContents(f),n=n.getBoundingClientRect(),t=d.documentElement.clientHeight-1,n=n.bottom-n.top,n=A.height()+1+(n-t),e||-1===b.max||(n=Math.min(n,b.max)),A.height(Math.ceil(Math.max(n,b.min))))},A.destroy=function(){var e;h&&(h.destroy(),h=m=null,s&&Ee(s),Ae($e,"click",re),(e=r.form)&&(Ae(e,"reset",T),Ae(e,"submit",A.updateOriginal,!0)),Ae(window,"pagehide",A.updateOriginal),Ae(window,"pageshow",T),Ee(l),Ee(u),Ee(x),delete r._sceditor,tt(r),r.required=B)},A.createDropDown=function(e,t,n){t="sceditor-"+t;A.closeDropDown(),s&&rt(s,t)||(e=be({top:e.offsetTop,left:e.offsetLeft,marginTop:e.clientHeight},I.dropDownCss),Re(s=Te("div",{className:"sceditor-dropdown "+t}),e),Se(s,n),Se(x,s),De(s,"click focusin",function(e){e.stopPropagation()}),s&&(t=Ne(s,"input,textarea")[0])&&t.focus())},re=function(e){3!==e.which&&s&&!e.defaultPrevented&&(me(),A.closeDropDown())},X=function(e){var t=m.selectedRange();if(t){for(var n,o,r=Te("div",{},d),i=t.commonAncestorContainer;i&&Be(i,!0);)i.nodeType===we&&(o=i.cloneNode(),r.firstChild&&Se(o,r.firstChild),Se(r,o),n=n||o),i=i.parentNode;Se(n||r,t.cloneContents()),ht(r),e.clipboardData.setData("text/html",r.innerHTML),xe(Ne(r,"p"),function(e,t){ft(t,"div")}),xe(Ne(r,"br"),function(e,t){t.nextSibling&&Be(t.nextSibling,!0)||Ee(t)}),Se(f,r),e.clipboardData.setData("text/plain",r.innerText),Ee(r),"cut"===e.type&&t.deleteContents(),e.preventDefault()}},K=function(e){var t,n,o=f,r=e.clipboardData;if(r){var i={},a=r.types,l=r.items;e.preventDefault();for(var s=0;s<a.length;s++){if(a.indexOf("text/html")<0&&Ge.FileReader&&l&&rn.test(l[s].type))return t=r.items[s].getAsFile(),n=void 0,(n=new FileReader).onload=function(e){Q({html:'<img src="'+e.target.result+'" />'})},void n.readAsDataURL(t);i[a[s]]=r.getData(a[s])}i.text=i["text/plain"],i.html=L(i["text/html"]),Q(i)}else if(!w){var c=o.scrollTop;for(m.saveRange(),w=$e.createDocumentFragment();o.firstChild;)Se(w,o.firstChild);setTimeout(function(){var e=o.innerHTML;o.innerHTML="",Se(o,w),o.scrollTop=c,w=!1,m.restoreRange(),Q({html:L(e)})},0)}},Q=function(e){var t=Te("div",{},d),e=(h.call("pasteRaw",e),lt(x,"pasteraw",e),e.html?(t.innerHTML=L(e.html),mt(t)):t.innerHTML=He(e.text||""),{val:t.innerHTML}),t=("fragmentToSource"in a&&(e.val=a.fragmentToSource(e.val,d,g)),h.call("paste",e),lt(x,"paste",e),"fragmentToHtml"in a&&(e.val=a.fragmentToHtml(e.val,g)),h.call("pasteHtml",e),m.getFirstBlockParent());A.wysiwygEditorInsertHtml(e.val,null,!0),function e(t){if(t.nodeType===we){for(var n=t.parentNode,o=t.tagName,r=t.childNodes.length;r--;)e(t.childNodes[r]);if(Be(t)&&"BR"!==o){for(r=t.style.length;r--;){var i=t.style[r];Re(n,i)===Re(t,i)&&t.style.removeProperty(i)}if(!t.style.length)if(Je(t,"style"),"FONT"===o&&(Re(t,"fontFamily").toLowerCase()===Re(n,"fontFamily").toLowerCase()&&Je(t,"face"),Re(t,"color")===Re(n,"color")&&Je(t,"color"),Re(t,"fontSize")===Re(n,"fontSize")&&Je(t,"size")),!t.attributes.length&&/SPAN|FONT/.test(o))vt(t);else if(/B|STRONG|EM|SPAN|FONT/.test(o))for(var a=/B|STRONG/.test(o),l="EM"===o;n&&Be(n)&&(!a||/bold|700/i.test(Re(n,"fontWeight")))&&(!l||"italic"===Re(n,"fontStyle"));){if((n.tagName===o||a&&/B|STRONG/.test(n.tagName))&&yt(n,t)){vt(t);break}n=n.parentNode}var s=t.nextSibling;s&&s.tagName===o&&yt(s,t)&&(Se(t,s),vt(s))}}}(t)},A.closeDropDown=function(e){s&&(Ee(s),s=null),!0===e&&A.focus()},A.wysiwygEditorInsertHtml=function(e,t,n){var o=Fe(i);A.focus(),!n&&Ce(y,"code")||(m.insertHTML(e,t),m.saveRange(),P(),mt(f),an(f,d),tt(n=Ne(f,"#sceditor-end-marker")[0]),e=f.scrollTop,t=gt(n).top+1.5*n.offsetHeight-o,et(n),(e<t||t+o<e)&&(f.scrollTop=t),S(!1),m.restoreRange(),E())},A.wysiwygEditorInsertText=function(e,t){A.wysiwygEditorInsertHtml(He(e),He(t))},A.insertText=function(e,t){return A.inSourceMode()?A.sourceEditorInsertText(e,t):A.wysiwygEditorInsertText(e,t),A},A.sourceEditorInsertText=function(e,t){var n,o=l.selectionStart,r=l.selectionEnd,i=l.scrollTop;l.focus(),n=l.value,t&&(e+=n.substring(o,r)+t),l.value=n.substring(0,o)+e+n.substring(r,n.length),l.selectionStart=o+e.length-(t?t.length:0),l.selectionEnd=l.selectionStart,l.scrollTop=i,l.focus(),S()},A.getRangeHelper=function(){return m},A.sourceEditorCaret=function(e){return l.focus(),e?(l.selectionStart=e.start,l.selectionEnd=e.end,this):{start:l.selectionStart,end:l.selectionEnd}},A.val=function(e,t){return ve(e)?(A.inSourceMode()?A.setSourceEditorValue(e):(!1!==t&&"toHtml"in a&&(e=a.toHtml(e)),A.setWysiwygEditorValue(e)),A):A.inSourceMode()?A.getSourceEditorValue(!1):A.getWysiwygEditorValue(t)},A.insert=function(e,t,n,o,r){var i;return A.inSourceMode()?A.sourceEditorInsertText(e,t):(t&&(i=m.selectedHtml(),e+=(i=!1!==n&&"fragmentToSource"in a?a.fragmentToSource(i,d,g):i)+t),!1!==n&&"fragmentToHtml"in a&&(e=a.fragmentToHtml(e,g)),!1!==n&&!0===r&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),A.wysiwygEditorInsertHtml(e)),A},A.getWysiwygEditorValue=function(e){for(var t,n=Te("div",{},d),o=f.childNodes,r=0;r<o.length;r++)Se(n,o[r].cloneNode(!0));return Se(f,n),mt(n),Ee(n),t=n.innerHTML,!1!==e&&a.hasOwnProperty("toSource")?a.toSource(t,d):t},A.getBody=function(){return f},A.getContentAreaContainer=function(){return i},A.getSourceEditorValue=function(e){var t=l.value;return!1!==e&&"toHtml"in a?a.toHtml(t):t},A.setWysiwygEditorValue=function(e){f.innerHTML=L(e=e||"<p><br /></p>"),P(),E(),S(),D()},A.setSourceEditorValue=function(e){l.value=e,S()},A.updateOriginal=function(){r.value=A.val()},P=function(){var e,l,s,c,t,u,d;I.emoticonsEnabled&&(e=f,l=O,s=I.emoticonsCompat,c=e.ownerDocument,t="(^|\\s| | | | |$)",u=[],d={},Ze(e,"code")||(xe(l,function(e){d[e]=new RegExp(t+xt(e)+t),u.push(e)}),u.sort(function(e,t){return t.length-e.length}),function e(t){for(t=t.firstChild;t;){if(t.nodeType!==we||_e(t,"code")||e(t),t.nodeType===ke)for(var n=0;n<u.length;n++){var o,r=t.nodeValue,i=u[n],a=s?r.search(d[i]):r.indexOf(i);-1<a&&(a=r.indexOf(i,a),o=ut(l[i],c),i=r.substr(a+i.length),o.appendChild(c.createTextNode(i)),t.nodeValue=r.substr(0,a),t.parentNode.insertBefore(o,t.nextSibling))}t=t.nextSibling}}(e)))},A.inSourceMode=function(){return rt(x,"sourceMode")},A.sourceMode=function(e){var t=A.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&A.toggleSourceMode(),A)},A.toggleSourceMode=function(){var e=A.inSourceMode();!Ct&&e||(e||(m.saveRange(),m.clear()),v=null,A.blur(),e?A.setWysiwygEditorValue(A.getSourceEditorValue()):A.setSourceEditorValue(A.getWysiwygEditorValue()),nt(l),nt(i),Le(x,"wysiwygMode",e),Le(x,"sourceMode",!e),ie(),C())},ae=function(){return l.focus(),l.value.substring(l.selectionStart,l.selectionEnd)},j=function(e,t){A.inSourceMode()?t.txtExec&&(Array.isArray(t.txtExec)?A.sourceEditorInsertText.apply(A,t.txtExec):t.txtExec.call(A,e,ae())):t.exec&&(Xe(t.exec)?t.exec.call(A,e):A.execCommand(t.exec,t.hasOwnProperty("execParam")?t.execParam:null))},A.execCommand=function(e,t){var n=!1,o=A.commands[e];if(A.focus(),!Ce(m.parentNode(),"code")){try{n=d.execCommand(e,!1,t)}catch(e){}!n&&o&&o.errorMessage&&alert(A._(o.errorMessage)),C()}},le=function(){function e(){if(o.getSelection()&&o.getSelection().rangeCount<=0)v=null;else if(m&&!m.compare(v)){if((v=m.cloneSelected())&&v.collapsed){var e=v.startContainer,t=v.startOffset;for(t&&e.nodeType!==ke&&(e=e.childNodes[t]);e&&e.parentNode!==f;)e=e.parentNode;e&&Be(e,!0)&&(m.saveRange(),an(f,d),m.restoreRange())}lt(x,"selectionchanged")}F=!1}F||(F=!0,"onselectionchange"in d?e():setTimeout(e,100))},se=function(){var e,t=m.parentNode();g!==t&&(e=g,g=t,y=m.getFirstBlockParent(t),lt(x,"nodechanged",{oldNode:e,newNode:g}))},A.currentNode=function(){return g},A.currentBlockNode=function(){return y},C=function(){var e,t,n="active",o=d,r=A.sourceMode();if(A.readOnly())xe(Ne(u,n),function(e,t){it(t,n)});else{r||(t=m.parentNode(),e=m.getFirstBlockParent(t));for(var i=0;i<R.length;i++){var a=0,l=ge[R[i].name],s=R[i].state,c=r&&!l._sceTxtMode||!r&&!l._sceWysiwygMode;if(ve(s)){if(!r)try{-1<(a=o.queryCommandEnabled(s)?0:-1)&&(a=o.queryCommandState(s)?1:0)}catch(e){}}else c||(a=s.call(A,t,e));Le(l,"disabled",c||a<0),Le(l,n,0<a)}k&&k.update&&k.update(r,t,e)}},ee=function(e){var t,n,o;e.defaultPrevented||(A.closeDropDown(),13===e.which&&!_e(y,"li,ul,ol")&&dt(y)&&(t=Te("br",{},d),m.insertNode(t),(o=(n=t.parentNode).lastChild)&&o.nodeType===ke&&""===o.nodeValue&&(Ee(o),o=n.lastChild),!Be(n,!0)&&o===t&&Be(t.previousSibling)&&m.insertHTML("<br>"),e.preventDefault()))},E=function(){ct(f,function(e){return e.nodeType!==we||/inline/.test(Re(e,"display"))||_e(e,".sceditor-nlf")||!dt(e)?!(3===e.nodeType&&!/^\s*$/.test(e.nodeValue)||_e(e,"br"))&&void 0:((e=Te("p",{},d)).className="sceditor-nlf",e.innerHTML="<br />",Se(f,e),!1)})},T=function(){A.val(r.value)},te=function(){A.closeDropDown()},A._=function(){var n=arguments;return t&&t[n[0]]&&(n[0]=t[n[0]]),n[0].replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[+t+1]?n[+t+1]:"{"+t+"}"})},oe=function(t){h&&h.call(t.type+"Event",t,A);var e=(t.target===l?"scesrc":"scewys")+t.type;M[e]&&M[e].forEach(function(e){e.call(A,t)})},A.bind=function(e,t,n,o){for(var r,i,a=(e=e.split(" ")).length;a--;)Xe(t)&&(r="scewys"+e[a],i="scesrc"+e[a],n||(M[r]=M[r]||[],M[r].push(t)),o||(M[i]=M[i]||[],M[i].push(t)),"valuechanged"===e[a]&&(S.hasHandler=!0));return A},A.unbind=function(e,t,n,o){for(var r=(e=e.split(" ")).length;r--;)Xe(t)&&(n||Qe(M["scewys"+e[r]]||[],t),o||Qe(M["scesrc"+e[r]]||[],t));return A},A.blur=function(e,t,n){return Xe(e)?A.bind("blur",e,t,n):(A.sourceMode()?l:f).blur(),A},A.focus=function(e,t,n){if(Xe(e))A.bind("focus",e,t,n);else if(A.inSourceMode())l.focus();else{if(Ne(d,":focus").length)return;e=m.selectedRange(),v||ce(!0),e&&1===e.endOffset&&e.collapsed&&(t=e.endContainer)&&1===t.childNodes.length&&_e(t.firstChild,"br")&&(e.setStartBefore(t.firstChild),e.collapse(!0),m.selectRange(e)),o.focus(),f.focus()}return C(),A},A.keyDown=function(e,t,n){return A.bind("keydown",e,t,n)},A.keyPress=function(e,t,n){return A.bind("keypress",e,t,n)},A.keyUp=function(e,t,n){return A.bind("keyup",e,t,n)},A.nodeChanged=function(e){return A.bind("nodechanged",e,!1,!0)},A.selectionChanged=function(e){return A.bind("selectionchanged",e,!1,!0)},A.valueChanged=function(e,t,n){return A.bind("valuechanged",e,t,n)},ue=function(e){var n=0,o=A.emoticonsCache,t=String.fromCharCode(e.which);Ce(y,"code")||(o||(o=[],xe(O,function(e,t){o[n++]=[e,t]}),o.sort(function(e,t){return e[0].length-t[0].length}),A.emoticonsCache=o,A.longestEmoticonCode=o[o.length-1][0].length),!m.replaceKeyword(A.emoticonsCache,!0,!0,A.longestEmoticonCode,I.emoticonsCompat,t)||I.emoticonsCompat&&/^\s$/.test(t)||e.preventDefault())},de=function(){var e=y,t=m,n=/[^\s\xA0\u2002\u2003\u2009]+/,o=e&&Ne(e,"img[data-sceditor-emoticon]");if(e&&o.length)for(var r=0;r<o.length;r++){var i,a,l,s,c=o[r],u=c.parentNode,d=c.previousSibling,f=c.nextSibling;(d&&n.test(d.nodeValue.slice(-1))||f&&n.test((f.nodeValue||"")[0]))&&(a=-1,l=(i=t.cloneSelected()).startContainer,s=d.nodeValue||"",s+=ot(c,"sceditor-emoticon"),l===f&&(a=s.length+i.startOffset),l===e&&e.childNodes[i.startOffset]===f&&(a=s.length),l===d&&(a=i.startOffset),(f=f&&f.nodeType===ke?f:u.insertBefore(u.ownerDocument.createTextNode(""),f)).insertData(0,s),Ee(d),Ee(c),-1<a&&(i.setStart(f,a),i.collapse(!0),t.selectRange(i)))}},A.emoticons=function(e){return e||!1===e?((I.emoticonsEnabled=e)?(De(f,"keypress",ue),A.sourceMode()||(m.saveRange(),P(),S(!1),m.restoreRange())):(xe(Ne(f,"img[data-sceditor-emoticon]"),function(e,t){var n=ot(t,"sceditor-emoticon"),n=d.createTextNode(n);t.parentNode.replaceChild(n,t)}),Ae(f,"keypress",ue),S()),A):I.emoticonsEnabled},A.css=function(e){return n||(n=Te("style",{id:"inline"},d),Se(d.head,n)),ve(e)?(n.styleSheet?n.styleSheet.cssText=e:n.innerHTML=e,A):n.styleSheet?n.styleSheet.cssText:n.innerHTML},Z=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},o={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},r=e.which,i={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[r]||String.fromCharCode(r).toLowerCase();(e.ctrlKey||e.metaKey)&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),o[r]?i=o[r]:n[i]&&(i=n[i])),i&&(r<16||18<r)&&t.push(i),t=t.join("+"),_[t]&&!1===_[t].call(A)&&(e.stopPropagation(),e.preventDefault())},A.addShortcut=function(e,t){return e=e.toLowerCase(),ve(t)?_[e]=function(){return j(ge[t],A.commands[t]),!1}:_[e]=t,A},A.removeShortcut=function(e){return delete _[e.toLowerCase()],A},J=function(e){var t,n,o;if(!I.disableBlockRemove&&8===e.which&&(n=m.selectedRange())&&(t=n.startContainer,0===n.startOffset&&(o=fe())&&!_e(o,"body"))){for(;t!==o;){for(;t.previousSibling;)if((t=t.previousSibling).nodeType!==ke||t.nodeValue)return;if(!(t=t.parentNode))return}A.clearBlockFormatting(o),e.preventDefault()}},fe=function(){for(var e=y;!dt(e)||Be(e,!0);)if(!(e=e.parentNode)||_e(e,"body"))return;return e},A.clearBlockFormatting=function(e){return(e=e||fe())&&!_e(e,"body")&&(m.saveRange(),e.className="",Me(e,"style",""),_e(e,"p,div,td")||ft(e,"p"),m.restoreRange()),A},S=function(e){var t,n,o;h&&(h.hasHandler("valuechangedEvent")||S.hasHandler)&&(o=!(n=A.sourceMode())&&m.hasSelection(),e=(c=!1)!==e&&!d.getElementById("sceditor-start-marker"),p&&(clearTimeout(p),p=!1),o&&e&&m.saveRange(),(t=n?l.value:f.innerHTML)!==S.lastVal&&(S.lastVal=t,lt(x,"valuechanged",{rawValue:n?A.val():t})),o&&e&&m.removeMarkers())},pe=function(){p&&S()},N=function(e){var e=e.which,t=13===(n=N.lastChar)||32===n,n=8===n||46===n;N.lastChar=e,c||(13===e||32===e?t?N.triggerNext=!0:S():8===e||46===e?n?N.triggerNext=!0:S():N.triggerNext&&(S(),N.triggerNext=!1),clearTimeout(p),p=setTimeout(function(){c||S()},1500))},ne=function(e){(c=/start/i.test(e.type))||S()},me=function(){A.updateOriginal()},e()}Ye.locale={},Ye.formats={},Ye.icons={},Ye.command={get:function(e){return Pe[e]||null},set:function(e,t){return!(!e||!t)&&((t=be(Pe[e]||{},t)).remove=function(){Ye.command.remove(e)},Pe[e]=t,this)},remove:function(e){return Pe[e]&&delete Pe[e],this}},window.sceditor={command:Ye.command,commands:Pe,defaultOptions:bt,ios:Tt,isWysiwygSupported:Ct,regexEscape:xt,escapeEntities:He,escapeUriScheme:function(e){var t,n=window.location;return e&&/^[^\/]*:/i.test(e)&&!v.test(e)?((t=n.pathname.split("/")).pop(),n.protocol+"//"+n.host+t.join("/")+"/"+e):e},dom:{css:Re,attr:Me,removeAttr:Je,is:_e,closest:Ce,width:at,height:Fe,traverse:f,rTraverse:ct,parseHTML:ut,hasStyling:dt,convertElement:ft,blockLevelList:p,canHaveChildren:pt,isInline:Be,copyCSS:function(e,t){t.style&&e.style&&(t.style.cssText=e.style.cssText+t.style.cssText)},fixNesting:mt,findCommonAncestor:function(e,t){for(;e=e.parentNode;)if((n=e)!==t&&n.contains&&n.contains(t))return e;var n},getSibling:h,removeWhiteSpace:ht,extractContents:g,getOffset:gt,getStyle:y,hasStyle:function(e,t,n){return!!(e=y(e,t))&&(!n||e===n||Array.isArray(n)&&-1<n.indexOf(e))}},locale:Ye.locale,icons:Ye.icons,utils:{each:xe,isEmptyObject:s,extend:be},plugins:wt.plugins,formats:Ye.formats,create:function(e,t){t=t||{},Ze(e,".sceditor-container")||(t.runWithoutWysiwygSupport||Ct)&&new Ye(e,t)},instance:function(e){return e._sceditor}},i.default.sceditor=window.sceditor,i.default.fn.sceditor=function(e){var t,n=[];return this.each(function(){t=this._sceditor,"state"===e?n.push(!!t):"instance"===e?n.push(t):t||i.default.sceditor.create(this,e)}),n.length?1===n.length?n[0]:n:this}}(),function(e){"use strict";var d=e.escapeEntities,a=e.escapeUriScheme,h=e.dom,t=e.utils,f=h.css,g=h.attr,y=h.is,n=t.extend,s=t.each,v="data-sceditor-emoticon",i=e.command.get,b={always:1,never:2,auto:3},o={bold:{txtExec:["[b]","[/b]"]},italic:{txtExec:["[i]","[/i]"]},underline:{txtExec:["[u]","[/u]"]},strike:{txtExec:["[s]","[/s]"]},subscript:{txtExec:["[sub]","[/sub]"]},superscript:{txtExec:["[sup]","[/sup]"]},left:{txtExec:["[left]","[/left]"]},center:{txtExec:["[center]","[/center]"]},right:{txtExec:["[right]","[/right]"]},justify:{txtExec:["[justify]","[/justify]"]},font:{txtExec:function(e){var t=this;i("font")._dropDown(t,e,function(e){t.insertText("[font="+e+"]","[/font]")})}},size:{txtExec:function(e){var t=this;i("size")._dropDown(t,e,function(e){t.insertText("[size="+e+"]","[/size]")})}},color:{txtExec:function(e){var t=this;i("color")._dropDown(t,e,function(e){t.insertText("[color="+e+"]","[/color]")})}},bulletlist:{txtExec:function(e,t){this.insertText("[ul]\n[li]"+t.split(/\r?\n/).join("[/li]\n[li]")+"[/li]\n[/ul]")}},orderedlist:{txtExec:function(e,t){this.insertText("[ol]\n[li]"+t.split(/\r?\n/).join("[/li]\n[li]")+"[/li]\n[/ol]")}},table:{txtExec:["[table][tr][td]","[/td][/tr][/table]"]},horizontalrule:{txtExec:["[hr]"]},code:{txtExec:["[code]","[/code]"]},image:{txtExec:function(e,t){var r=this;i("image")._dropDown(r,e,t,function(e,t,n){var o="";t&&(o+=" width="+t),n&&(o+=" height="+n),r.insertText("[img"+o+"]"+e+"[/img]")})}},email:{txtExec:function(e,n){var o=this;i("email")._dropDown(o,e,function(e,t){o.insertText("[email="+e+"]"+(t||n||e)+"[/email]")})}},link:{txtExec:function(e,n){var o=this;i("link")._dropDown(o,e,function(e,t){o.insertText("[url="+e+"]"+(t||n||e)+"[/url]")})}},quote:{txtExec:["[quote]","[/quote]"]},youtube:{txtExec:function(e){var t=this;i("youtube")._dropDown(t,e,function(e){t.insertText("[youtube]"+e+"[/youtube]")})}},rtl:{txtExec:["[rtl]","[/rtl]"]},ltr:{txtExec:["[ltr]","[/ltr]"]}},x={b:{tags:{b:null,strong:null},styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{tags:{u:null},styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},font:{tags:{font:{face:null}},styles:{"font-family":null},quoteType:b.never,format:function(e,t){var n;return"[font="+l(n=y(e,"font")&&(n=g(e,"face"))?n:f(e,"font-family"))+"]"+t+"[/font]"},html:'<font face="{defaultattr}">{0}</font>'},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(e,t){var n=g(e,"size"),o=2;return-1<(n=n||f(e,"fontSize")).indexOf("px")?((n=+n.replace("px",""))<12&&(o=1),15<n&&(o=3),17<n&&(o=4),23<n&&(o=5),31<n&&(o=6),47<n&&(o=7)):o=n,"[size="+o+"]"+t+"[/size]"},html:'<font size="{defaultattr}">{!0}</font>'},color:{tags:{font:{color:null}},styles:{color:null},quoteType:b.never,format:function(e,t){var n;return"[color="+u(n=y(e,"font")&&(n=g(e,"color"))?n:e.style.color||f(e,"color"))+"]"+t+"[/color]"},html:function(e,t,n){return'<font color="'+d(u(t.defaultattr),!0)+'">'+n+"</font>"}},ul:{tags:{ul:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{breakStart:!0,isInline:!1,skipLastLineBreak:!0,html:"<ul>{0}</ul>"},ol:{tags:{ol:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},isInline:!1,closedBy:["/ul","/ol","/list","*","li"],format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{isInline:!1,closedBy:["/ul","/ol","/list","*","li"],html:"<li>{0}</li>"},table:{tags:{table:null},isInline:!1,isHtmlInline:!0,skipLastLineBreak:!0,format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},isInline:!1,skipLastLineBreak:!0,format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},allowsEmpty:!0,isInline:!1,format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},allowsEmpty:!0,isInline:!1,format:"[td]{0}[/td]",html:"<td>{0}</td>"},emoticon:{allowsEmpty:!0,tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(e,t){return g(e,v)+t},html:"{0}"},hr:{tags:{hr:null},allowsEmpty:!0,isSelfClosing:!0,isInline:!1,format:"[hr]{0}",html:"<hr />"},img:{allowsEmpty:!0,tags:{img:{src:null}},allowedChildren:["#"],quoteType:b.never,format:function(t,e){function n(e){return t.style?t.style[e]:null}var o,r="";return g(t,v)?e:(e=g(t,"width")||n("width"),o=g(t,"height")||n("height"),"[img"+(r=t.complete&&(e||o)||e&&o?"="+h.width(t)+"x"+h.height(t):r)+"]"+g(t,"src")+"[/img]")},html:function(e,t,n){var o="",r=t.width,i=t.height;return t.defaultattr&&(r=(t=t.defaultattr.split(/x/i))[0],i=2===t.length?t[1]:t[0]),void 0!==r&&(o+=' width="'+d(r,!0)+'"'),void 0!==i&&(o+=' height="'+d(i,!0)+'"'),"<img"+o+' src="'+a(n)+'" />'}},url:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:b.never,format:function(e,t){e=g(e,"href");return"mailto:"===e.substr(0,7)?'[email="'+e.substr(7)+'"]'+t+"[/email]":"[url="+e+"]"+t+"[/url]"},html:function(e,t,n){return t.defaultattr=d(t.defaultattr,!0)||n,'<a href="'+a(t.defaultattr)+'">'+n+"</a>"}},email:{quoteType:b.never,html:function(e,t,n){return'<a href="mailto:'+(d(t.defaultattr,!0)||n)+'">'+n+"</a>"}},quote:{tags:{blockquote:null},isInline:!1,quoteType:b.never,format:function(e,t){for(var n,o="data-author",r="",i=e.children,a=0;!n&&a<i.length;a++)y(i[a],"cite")&&(n=i[a]);return(n||g(e,o))&&(r=n&&n.textContent||g(e,o),g(e,o,r),n&&e.removeChild(n),t=this.elementToBbcode(e),r="="+r.replace(/(^\s+|\s+$)/g,""),n&&e.insertBefore(n,e.firstChild)),"[quote"+r+"]"+t+"[/quote]"},html:function(e,t,n){return"<blockquote>"+(n=t.defaultattr?"<cite>"+d(t.defaultattr)+"</cite>"+n:n)+"</blockquote>"}},code:{tags:{code:null},isInline:!1,allowedChildren:["#","#newline"],format:"[code]{0}[/code]",html:"<code>{0}</code>"},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isInline:!1,allowsEmpty:!0,format:"[left]{0}[/left]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isInline:!1,allowsEmpty:!0,format:"[center]{0}[/center]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isInline:!1,allowsEmpty:!0,format:"[right]{0}[/right]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isInline:!1,allowsEmpty:!0,format:"[justify]{0}[/justify]",html:'<div align="justify">{0}</div>'},youtube:{allowsEmpty:!0,tags:{iframe:{"data-youtube-id":null}},format:function(e,t){return(e=g(e,"data-youtube-id"))?"[youtube]"+e+"[/youtube]":t},html:'<iframe width="560" height="315" frameborder="0" src="https://www.youtube-nocookie.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" allowfullscreen></iframe>'},rtl:{styles:{direction:["rtl"]},isInline:!1,format:"[rtl]{0}[/rtl]",html:'<div style="direction: rtl">{0}</div>'},ltr:{styles:{direction:["ltr"]},isInline:!1,format:"[ltr]{0}[/ltr]",html:'<div style="direction: ltr">{0}</div>'},ignore:{}};function w(e,o){return e.replace(/\{([^}]+)\}/g,function(e,t){var n=!0;return"!"===t.charAt(0)&&(n=!1,t=t.substring(1)),"0"===t&&(n=!1),void 0===o[t]?e:n?d(o[t],!0):o[t]})}function k(e){return"function"==typeof e}function l(e){return e&&e.replace(/\\(.)/g,"$1").replace(/^(["'])(.*?)\1$/,"$2")}var T="open",C="content",E="newline",S="close";function c(e,t,n,o,r,i){var a=this;a.type=e,a.name=t,a.val=n,a.attrs=o||{},a.children=r||[],a.closing=i||null}function N(e){var m=this;function a(e,t){var n,o,r;return e===T&&(n=t.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/))&&(r=i(n[1]),n[2]&&(n[2]=n[2].trim())&&(o=function(e){var t,n=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,o={};if("="===e.charAt(0)&&e.indexOf("=",1)<0)o.defaultattr=l(e.substr(1));else for("="===e.charAt(0)&&(e="defaultattr"+e);t=n.exec(e);)o[i(t[1])]=l(t[3])||t[4];return o}(n[2]))),e===S&&(n=t.match(/\[\/([^\[\]]+)\]/))&&(r=i(n[1])),(r=e===E?"#newline":r)&&(e!==T&&e!==S||x[r])||(e=C,r="#"),new c(e,r,t,o)}function f(e,t,n){for(var o=n.length;o--;)if(n[o].type===t&&n[o].name===e)return 1}function p(e,t){e=(e?x[e.name]:{}).allowedChildren;return!m.opts.fixInvalidChildren||!e||-1<e.indexOf(t.name||"#")}function u(e,t){for(var n,o,r,i,a,l,s="",c=function(e){return!1!==(!e||(void 0!==e.isHtmlInline?e.isHtmlInline:e.isInline))};0<e.length;)if(n=e.shift()){if(n.type===T)l=n.children[n.children.length-1]||{},o=x[n.name],i=t&&c(o),r=u(n.children,!1),l=o&&o.html?(c(o)||!c(x[l.name])||o.isPreFormatted||o.skipLastLineBreak||(r+="<br />"),k(o.html)?o.html.call(m,n,n.attrs,r):(n.attrs[0]=r,w(o.html,n.attrs))):n.val+r+(n.closing?n.closing.val:"");else{if(n.type===E){if(!t){s+="<br />";continue}a||(s+="<div>"),s+="<br />",e.length||(s+="<br />"),s+="</div>\n",a=!1;continue}i=t,l=d(n.val,!0)}i&&!a?(s+="<div>",a=!0):!i&&a&&(s+="</div>\n",a=!1),s+=l}return a&&(s+="</div>\n"),s}function h(e,t,n){var o=/\s|=/.test(e);return k(t)?t(e,n):t===b.never||t===b.auto&&!o?e:'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function g(e){return e.length?e[e.length-1]:null}function i(e){return e.toLowerCase()}m.opts=n({},N.defaults,e),m.tokenize=function(e){var t,n,o,r=[],i=[{type:C,regex:/^([^\[\r\n]+|\[)/},{type:E,regex:/^(\r\n|\r|\n)/},{type:T,regex:/^\[[^\[\]]+\]/},{type:S,regex:/^\[\/[^\[\]]+\]/}];e:for(;e.length;){for(o=i.length;o--;)if(n=i[o].type,(t=e.match(i[o].regex))&&t[0]){r.push(a(n,t[0])),e=e.substr(t[0].length);continue e}e.length&&r.push(a(C,e)),e=""}return r},m.parse=function(e,t){var e=function(e){function t(){return g(d)}function n(e){(t()?t().children:u).push(e)}function o(e){return t()&&(i=x[t().name])&&i.closedBy&&-1<i.closedBy.indexOf(e)}var r,i,a,l,s,c=[],u=[],d=[];for(;r=e.shift();)switch(s=e[0],p(t(),r)||r.type===S&&t()&&r.name===t().name||(r.name="#",r.type=C),r.type){case T:o(r.name)&&d.pop(),n(r),(i=x[r.name])&&!i.isSelfClosing&&(i.closedBy||f(r.name,S,e))?d.push(r):i&&i.isSelfClosing||(r.type=C);break;case S:if(t()&&r.name!==t().name&&o("/"+r.name)&&d.pop(),t()&&r.name===t().name)t().closing=r,d.pop();else if(f(r.name,T,d)){for(;a=d.pop();){if(a.name===r.name){a.closing=r;break}a=a.clone(),c.length&&a.children.push(g(c)),c.push(a)}for(s&&s.type===E&&(i=x[r.name])&&!1===i.isInline&&(n(s),e.shift()),n(g(c)),l=c.length;l--;)d.push(c[l]);c.length=0}else r.type=C,n(r);break;case E:t()&&s&&o((s.type===S?"/":"")+s.name)&&(s.type===S&&s.name===t().name||((i=x[t().name])&&i.breakAfter||i&&!1===i.isInline&&m.opts.breakAfterBlock&&!1!==i.breakAfter)&&d.pop()),n(r);break;default:n(r)}return u}(m.tokenize(e)),n=m.opts;return n.fixInvalidNesting&&function e(t,n,o,r){var i,a,l,s;var c=function(e){e=x[e.name];return!e||!1!==e.isInline};n=n||[];r=r||t;for(a=0;a<t.length;a++)if((i=t[a])&&i.type===T){var u,d;if(o&&!c(i))if(d=g(n),s=d.splitAt(i),l=1<n.length?n[n.length-2].children:r,p(i,d)&&((u=d.clone()).children=i.children,i.children=[u]),-1<(u=l.indexOf(d)))return s.children.splice(0,1),l.splice(u+1,0,i,s),void((d=s.children[0])&&d.type===E&&!c(i)&&(s.children.splice(0,1),l.splice(u+2,0,d)));n.push(i),e(i.children,n,o||c(i),r),n.pop()}}(e),function e(t,n,o){var r,i,a,l,s,c,u,d;var f=t.length;n&&(l=x[n.name]);var p=f;for(;p--;)(r=t[p])&&(r.type===E?(i=0<p?t[p-1]:null,a=p<f-1?t[p+1]:null,d=!1,!o&&l&&!0!==l.isSelfClosing&&(i?c||a||(!1===l.isInline&&m.opts.breakEndBlock&&!1!==l.breakEnd&&(d=!0),l.breakEnd&&(d=!0),c=d):(!1===l.isInline&&m.opts.breakStartBlock&&!1!==l.breakStart&&(d=!0),l.breakStart&&(d=!0))),i&&i.type===T&&(s=x[i.name])&&(o?!1===s.isInline&&(d=!0):(!1===s.isInline&&m.opts.breakAfterBlock&&!1!==s.breakAfter&&(d=!0),s.breakAfter&&(d=!0))),!o&&!u&&a&&a.type===T&&(s=x[a.name])&&(!1===s.isInline&&m.opts.breakBeforeBlock&&!1!==s.breakBefore&&(d=!0),s.breakBefore&&(d=!0),u=d)?t.splice(p,1):(d&&t.splice(p,1),u=!1)):r.type===T&&e(r.children,r,o))}(e,null,t),n.removeEmptyTags&&function e(t){var n,o;var r=function(e){for(var t=e.length;t--;){var n=e[t].type;if(n===T||n===S)return!1;if(n===C&&/\S|\u00A0/.test(e[t].val))return!1}return!0};var i=t.length;for(;i--;)(n=t[i])&&n.type===T&&(o=x[n.name],e(n.children),r(n.children)&&o&&!o.isSelfClosing&&!o.allowsEmpty&&t.splice.apply(t,[i,1].concat(n.children)))}(e),e},m.toHTML=function(e,t){return u(m.parse(e,t),!0)},m.toHTMLFragment=function(e,t){return u(m.parse(e,t),!1)},m.toBBCode=function(e,t){return function e(t){var n,o,r,i,a,l,s,c,u,d="";for(;0<t.length;)if(n=t.shift())if(r=x[n.name],u=!(!r||!1!==r.isInline),i=r&&r.isSelfClosing,l=u&&m.opts.breakBeforeBlock&&!1!==r.breakBefore||r&&r.breakBefore,s=u&&!i&&m.opts.breakStartBlock&&!1!==r.breakStart||r&&r.breakStart,c=u&&m.opts.breakEndBlock&&!1!==r.breakEnd||r&&r.breakEnd,u=u&&m.opts.breakAfterBlock&&!1!==r.breakAfter||r&&r.breakAfter,a=(r?r.quoteType:null)||m.opts.quoteType||b.auto,r||n.type!==T)if(n.type===T){if(l&&(d+="\n"),d+="["+n.name,n.attrs)for(o in n.attrs.defaultattr&&(d+="="+h(n.attrs.defaultattr,a,"defaultattr"),delete n.attrs.defaultattr),n.attrs)n.attrs.hasOwnProperty(o)&&(d+=" "+o+"="+h(n.attrs[o],a,o));d+="]",s&&(d+="\n"),n.children&&(d+=e(n.children)),i||r.excludeClosing||(c&&(d+="\n"),d+="[/"+n.name+"]"),u&&(d+="\n"),n.closing&&i&&(d+=n.closing.val)}else d+=n.val;else d+=n.val,n.children&&(d+=e(n.children)),n.closing&&(d+=n.closing.val);return d}(m.parse(e,t))}}function r(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)).toString(16)).length<2?"0"+e:e}function u(e){var t;return(t=(e=e||"#000").match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))?"#"+r(t[1])+r(t[2])+r(t[3]):(t=e.match(/#([0-9a-f])([0-9a-f])([0-9a-f])\s*?$/i))?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:e}function p(){var c=this,r=(c.stripQuotes=l,{}),p={ul:["li","ol","ul"],ol:["li","ol","ul"],table:["tr"],tr:["td","th"],code:["br","p","div"]};function m(i,a,t){function l(e){var t=e[0],e=e[1],n=h.getStyle(i,t),o=i.parentNode;return!(!n||o&&h.hasStyle(o,t,n))&&(!e||e.includes(n))}function e(e){r[e]&&r[e][t]&&s(r[e][t],function(e,t){var n,o=x[e].strictMatch,r=(o=void 0===o?c.opts.strictMatch:o)?"every":"some";if(!t||t[r]((n=o,function(e){var t=e[0],e=e[1];return("style"!==t||"CODE"!==i.nodeName)&&("style"===t&&e?e[n?"every":"some"](l):(t=g(i,t))&&(!e||e.includes(t)))})))return t=x[e].format,a=k(t)?t.call(c,i,a):function(e){var n=arguments;return e.replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[+t+1]?n[+t+1]:"{"+t+"}"})}(t,a),!1})}return e("*"),e(i.nodeName.toLowerCase()),a}function u(e,t){function f(e,c,u){var d="";return h.traverse(e,function(e){var t="",n=e.nodeType,o=e.nodeName.toLowerCase(),r="code"===o,i="img"===o&&!!g(e,v),a=p[o],l=e.firstChild,s=!0;u&&(s=-1<u.indexOf(o),(s=i?!0:s)||(a=u)),1===n?y(e,".sceditor-nlf")&&!l||("iframe"!==o&&(t=f(e,c||r,a)),s?(c&&!i||(r||(t=m(e,t,!1)),t=m(e,t,!0)),d+=function(e,t){var n=e.nodeName.toLowerCase(),o=h.isInline;if(!o(e,!0)||"br"===n){for(var r,i,a=e.previousSibling;a&&1===a.nodeType&&!y(a,"br")&&o(a,!0)&&!a.firstChild;)a=a.previousSibling;for(;r=((i=e.parentNode)&&i.lastChild)===e,(e=i)&&r&&o(i,!0););r&&"li"!==n||(t+="\n"),"br"!==n&&a&&!y(a,"br")&&o(a,!0)&&(t="\n"+t)}return t}(e,t)):d+=t):3===n&&(d+=e.nodeValue)},!1,!0),d}return f(e,t)}function e(e,t,n){var o=new N(c.opts.parserOptions);return(e||n?o.toHTMLFragment:o.toHTML)(c.opts.bbcodeTrim?t.trim():t)}function t(e,t,n,o){n=n||document;var r,i=!!h.closest(o,"code"),a=n.createElement("div"),l=n.createElement("div"),s=new N(c.opts.parserOptions);for(l.innerHTML=t,f(a,"visibility","hidden"),a.appendChild(l),n.body.appendChild(a),e&&(a.insertBefore(n.createTextNode("#"),a.firstChild),a.appendChild(n.createTextNode("#"))),o&&f(l,"whiteSpace",f(o,"whiteSpace")),r=l.getElementsByClassName("sceditor-ignore");r.length;)r[0].parentNode.removeChild(r[0]);return h.removeWhiteSpace(a),t=u(l,i),n.body.removeChild(a),t=s.toBBCode(t,!0),t=c.opts.bbcodeTrim?t.trim():t}c.init=function(){c.opts=this.opts,c.elementToBbcode=u,s(x,function(n,e){var o=!1===e.isInline,e=x[n].tags,t=x[n].styles;t&&(r["*"]=r["*"]||{},r["*"][o]=r["*"][o]||{},r["*"][o][n]=[["style",Object.entries(t)]]),e&&s(e,function(e,t){t&&t.style&&(t.style=Object.entries(t.style)),r[e]=r[e]||{},r[e][o]=r[e][o]||{},r[e][o][n]=t&&Object.entries(t)})}),this.commands=n(!0,{},o,this.commands),this.toBBCode=c.toSource,this.fromBBCode=c.toHtml},c.toHtml=e.bind(null,!1),c.fragmentToHtml=e.bind(null,!0),c.toSource=t.bind(null,!1),c.fragmentToSource=t.bind(null,!0)}c.prototype={clone:function(){var e=this;return new c(e.type,e.name,e.val,n({},e.attrs),[],e.closing?e.closing.clone():null)},splitAt:function(e){var t,n=this.clone(),e=this.children.indexOf(e);return-1<e&&(t=this.children.length-e,n.children=this.children.splice(e,t)),n}},N.QuoteType=b,N.defaults={breakBeforeBlock:!1,breakStartBlock:!1,breakEndBlock:!1,breakAfterBlock:!0,removeEmptyTags:!0,fixInvalidNesting:!0,fixInvalidChildren:!0,quoteType:b.auto,strictMatch:!1},p.get=function(e){return x[e]||null},p.set=function(e,t){return e&&t&&((t=n(x[e]||{},t)).remove=function(){delete x[e]},x[e]=t),this},p.rename=function(e,t){return e in x&&(x[t]=x[e],delete x[e]),this},p.remove=function(e){return e in x&&delete x[e],this},p.formatBBCodeString=w,e.formats.bbcode=p,e.BBCodeParser=N}(sceditor);
>>>>>>> master
